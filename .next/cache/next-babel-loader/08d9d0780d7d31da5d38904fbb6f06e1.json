{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\corde\\\\Desktop\\\\New folder\\\\bikeshop\\\\bikeshop_frontend\\\\components\\\\auth\\\\Profile.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from \"react\";\nimport cookie from \"js-cookie\";\nimport axios from \"axios\";\nimport { formatNumber } from \"../../helpers/function\";\nimport { decryptInfoData, encryptInfoData } from \"../../store/actions/infoActions\";\nvar host = process.env.API_URL;\n\nfunction Profile() {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState([]),\n      history = _useState[0],\n      sethistory = _useState[1];\n\n  var _useState2 = useState(null),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState(null),\n      orderDetails = _useState3[0],\n      setorderDetails = _useState3[1];\n\n  useEffect(function () {\n    var token = cookie.get(\"_wus_BJK\");\n\n    if (!token) {// window.location.href = \"/\";\n    } else {\n      fetchOrders(token);\n      fetchUserInfo(token);\n    }\n  }, []);\n\n  var fetchUserInfo = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(token) {\n      var res, decryptedData;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(\"\".concat(host, \"/api/user/user/details\"), {\n                headers: {\n                  Authorization: \"\".concat(token)\n                }\n              });\n\n            case 3:\n              res = _context.sent;\n\n              if (res) {\n                setUser(res.data.userDetails);\n                decryptedData = decryptInfoData();\n                console.log(decryptedData);\n                encryptInfoData.apply(void 0, _toConsumableArray(decryptedData).concat([{\n                  billing_firstName: {\n                    value: res.data.userDetails.first_name,\n                    error: \"\"\n                  },\n                  billing_lastName: {\n                    value: res.data.userDetails.last_name,\n                    error: \"\"\n                  }\n                }]));\n              }\n\n              console.log(res);\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n\n              if (_context.t0.response.status == 401) {\n                cookie.remove(\"_wus_BJK\");\n                window.location.href = \"/\";\n              }\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8]]);\n    }));\n\n    return function fetchUserInfo(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var fetchOrders = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(token) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return axios.get(\"\".concat(host, \"/api/user/order/history\"), {\n                headers: {\n                  Authorization: \"\".concat(token)\n                }\n              });\n\n            case 3:\n              res = _context2.sent;\n\n              if (res) {\n                sethistory(res.data.orders);\n              }\n\n              console.log(res);\n              _context2.next = 12;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](0);\n\n              if (_context2.t0.response.status == 401) {\n                cookie.remove(\"_wus_BJK\");\n                window.location.href = \"/\";\n              }\n\n              if (_context2.t0.response.data.err == \"user order history not found\") {\n                sethistory([]);\n              }\n\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 8]]);\n    }));\n\n    return function fetchOrders(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleDetails = function handleDetails() {};\n\n  return __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"card\",\n    style: {\n      marginLeft: \"1.7rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"card-body m-auto text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, __jsx(\"img\", {\n    src: \"https://t3.ftcdn.net/jpg/03/39/45/96/360_F_339459697_XAFacNQmwnvJRqe1Fe9VOptPWMUxlZP8.jpg\",\n    alt: \"\",\n    height: \"100\",\n    style: {\n      borderRadius: \"50%\",\n      marginBottom: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }), __jsx(\"h5\", {\n    className: \"card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, user ? user.first_name : \"N/A\", \" \", user ? user.last_name : \"N/A\")))), history.length ? __jsx(\"div\", {\n    className: \"col-md-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, history.map(function (order, i) {\n    return __jsx(React.Fragment, null, __jsx(\"div\", {\n      key: i,\n      \"class\": \"card\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: \"card-header\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 19\n      }\n    }, __jsx(\"h5\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }, order.order_name), __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }\n    }, order.created_at)), __jsx(\"div\", {\n      className: \"card-body\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 19\n      }\n    }, __jsx(\"div\", {\n      className: \"row\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }, __jsx(\"div\", {\n      className: \"col-md-4\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 23\n      }\n    }, __jsx(\"p\", {\n      className: \"card-text\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 25\n      }\n    }, \"Delivery Date: \", order.delivery_date), __jsx(\"p\", {\n      className: \"card-text\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 25\n      }\n    }, \"Delivery Time: \", order.delivery_time)), __jsx(\"div\", {\n      className: \"col-md-4\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 23\n      }\n    }, __jsx(\"p\", {\n      className: \"card-text\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 25\n      }\n    }, \"Mode Of Payment: \", order.payment_method), __jsx(\"p\", {\n      className: \"card-text\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 25\n      }\n    }, \"Status: \", order.order_status_id)), __jsx(\"div\", {\n      className: \"col-md-4\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 23\n      }\n    }, __jsx(\"p\", {\n      className: \"card-text\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 25\n      }\n    }, \"Amount: P\", formatNumber(order.total)), __jsx(\"button\", {\n      onClick: handleDetails,\n      \"data-toggle\": \"modal\",\n      \"data-target\": \"#exampleModal\",\n      className: \"btn btn-primary btn-details\",\n      style: {\n        marginTop: \"-0.5rem\",\n        fontSize: \"0.8rem\",\n        padding: \"0.7rem\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 25\n      }\n    }, \"View Details\"))))), __jsx(\"hr\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    }));\n  })) : __jsx(\"h2\", {\n    className: \"text-center m-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }, \"Order history is empty.\"), __jsx(\"div\", {\n    className: \"modal fade\",\n    id: \"exampleModal\",\n    tabIndex: \"-1\",\n    role: \"dialog\",\n    \"aria-labelledby\": \"exampleModalLabel\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"modal-dialog\",\n    role: \"document\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, __jsx(\"h5\", {\n    className: \"modal-title\",\n    id: \"exampleModalLabel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 15\n    }\n  }, \"Modal title\"), __jsx(\"button\", {\n    type: \"button\",\n    className: \"close\",\n    \"data-d\": \"modal\",\n    \"aria-label\": \"Close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }, __jsx(\"span\", {\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 17\n    }\n  }, \"\\xD7\"))), __jsx(\"div\", {\n    className: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, \"...\"), __jsx(\"div\", {\n    className: \"modal-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    \"data-dismiss\": \"modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 15\n    }\n  }, \"Close\"), __jsx(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 15\n    }\n  }, \"Save changes\"))))));\n}\n\n_s(Profile, \"EqxWa9/Yjs6pBes057n6vopyJ4I=\");\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["C:/Users/corde/Desktop/New folder/bikeshop/bikeshop_frontend/components/auth/Profile.js"],"names":["React","useEffect","useState","cookie","axios","formatNumber","decryptInfoData","encryptInfoData","host","process","env","API_URL","Profile","history","sethistory","user","setUser","orderDetails","setorderDetails","token","get","fetchOrders","fetchUserInfo","headers","Authorization","res","data","userDetails","decryptedData","console","log","billing_firstName","value","first_name","error","billing_lastName","last_name","response","status","remove","window","location","href","orders","err","handleDetails","marginLeft","borderRadius","marginBottom","length","map","order","i","order_name","created_at","delivery_date","delivery_time","payment_method","order_status_id","total","marginTop","fontSize","padding"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,QAA6B,wBAA7B;AACA,SACEC,eADF,EAEEC,eAFF,QAGO,iCAHP;AAKA,IAAIC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,OAAvB;;AAEA,SAASC,OAAT,GAAmB;AAAA;;AAAA;;AAAA,kBACaV,QAAQ,CAAC,EAAD,CADrB;AAAA,MACVW,OADU;AAAA,MACDC,UADC;;AAAA,mBAEOZ,QAAQ,CAAC,IAAD,CAFf;AAAA,MAEVa,IAFU;AAAA,MAEJC,OAFI;;AAAA,mBAGuBd,QAAQ,CAAC,IAAD,CAH/B;AAAA,MAGVe,YAHU;AAAA,MAGIC,eAHJ;;AAKjBjB,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIkB,KAAK,GAAGhB,MAAM,CAACiB,GAAP,CAAW,UAAX,CAAZ;;AACA,QAAI,CAACD,KAAL,EAAY,CACV;AACD,KAFD,MAEO;AACLE,MAAAA,WAAW,CAACF,KAAD,CAAX;AACAG,MAAAA,aAAa,CAACH,KAAD,CAAb;AACD;AACF,GARQ,EAQN,EARM,CAAT;;AAUA,MAAMG,aAAa;AAAA,wEAAG,iBAAOH,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEFf,KAAK,CAACgB,GAAN,WAAaZ,IAAb,6BAA2C;AACzDe,gBAAAA,OAAO,EAAE;AACPC,kBAAAA,aAAa,YAAKL,KAAL;AADN;AADgD,eAA3C,CAFE;;AAAA;AAEdM,cAAAA,GAFc;;AAQlB,kBAAIA,GAAJ,EAAS;AACPT,gBAAAA,OAAO,CAACS,GAAG,CAACC,IAAJ,CAASC,WAAV,CAAP;AACIC,gBAAAA,aAFG,GAEatB,eAAe,EAF5B;AAGPuB,gBAAAA,OAAO,CAACC,GAAR,CAAYF,aAAZ;AACArB,gBAAAA,eAAe,MAAf,4BAAmBqB,aAAnB,UAAkC;AAChCG,kBAAAA,iBAAiB,EAAE;AACjBC,oBAAAA,KAAK,EAAEP,GAAG,CAACC,IAAJ,CAASC,WAAT,CAAqBM,UADX;AAEjBC,oBAAAA,KAAK,EAAE;AAFU,mBADa;AAKhCC,kBAAAA,gBAAgB,EAAE;AAChBH,oBAAAA,KAAK,EAAEP,GAAG,CAACC,IAAJ,CAASC,WAAT,CAAqBS,SADZ;AAEhBF,oBAAAA,KAAK,EAAE;AAFS;AALc,iBAAlC;AAUD;;AACDL,cAAAA,OAAO,CAACC,GAAR,CAAYL,GAAZ;AAvBkB;AAAA;;AAAA;AAAA;AAAA;;AAyBlB,kBAAI,YAAMY,QAAN,CAAeC,MAAf,IAAyB,GAA7B,EAAkC;AAChCnC,gBAAAA,MAAM,CAACoC,MAAP,CAAc,UAAd;AACAC,gBAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACD;;AA5BiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAbpB,aAAa;AAAA;AAAA;AAAA,KAAnB;;AAgCA,MAAMD,WAAW;AAAA,yEAAG,kBAAOF,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEAf,KAAK,CAACgB,GAAN,WAAaZ,IAAb,8BAA4C;AAC1De,gBAAAA,OAAO,EAAE;AACPC,kBAAAA,aAAa,YAAKL,KAAL;AADN;AADiD,eAA5C,CAFA;;AAAA;AAEZM,cAAAA,GAFY;;AAQhB,kBAAIA,GAAJ,EAAS;AACPX,gBAAAA,UAAU,CAACW,GAAG,CAACC,IAAJ,CAASiB,MAAV,CAAV;AACD;;AACDd,cAAAA,OAAO,CAACC,GAAR,CAAYL,GAAZ;AAXgB;AAAA;;AAAA;AAAA;AAAA;;AAahB,kBAAI,aAAMY,QAAN,CAAeC,MAAf,IAAyB,GAA7B,EAAkC;AAChCnC,gBAAAA,MAAM,CAACoC,MAAP,CAAc,UAAd;AACAC,gBAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACD;;AAED,kBAAI,aAAML,QAAN,CAAeX,IAAf,CAAoBkB,GAApB,IAA2B,8BAA/B,EAA+D;AAC7D9B,gBAAAA,UAAU,CAAC,EAAD,CAAV;AACD;;AApBe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAXO,WAAW;AAAA;AAAA;AAAA,KAAjB;;AAwBA,MAAMwB,aAAa,GAAG,SAAhBA,aAAgB,GAAM,CAAE,CAA9B;;AAEA,SACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAsB,IAAA,KAAK,EAAE;AAAEC,MAAAA,UAAU,EAAE;AAAd,KAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,GAAG,EAAC,2FADN;AAEE,IAAA,GAAG,EAAC,EAFN;AAGE,IAAA,MAAM,EAAC,KAHT;AAIE,IAAA,KAAK,EAAE;AAAEC,MAAAA,YAAY,EAAE,KAAhB;AAAuBC,MAAAA,YAAY,EAAE;AAArC,KAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAOE;AAAI,IAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGjC,IAAI,GAAGA,IAAI,CAACkB,UAAR,GAAqB,KAD5B,OACoClB,IAAI,GAAGA,IAAI,CAACqB,SAAR,GAAoB,KAD5D,CAPF,CADF,CADF,CADF,EAkBGvB,OAAO,CAACoC,MAAR,GACC;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGpC,OAAO,CAACqC,GAAR,CAAY,UAACC,KAAD,EAAQC,CAAR,EAAc;AACzB,WACE,4BACE;AAAK,MAAA,GAAG,EAAEA,CAAV;AAAa,eAAM,MAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKD,KAAK,CAACE,UAAX,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAIF,KAAK,CAACG,UAAV,CAFF,CADF,EAKE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BACkBH,KAAK,CAACI,aADxB,CADF,EAIE;AAAG,MAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BACkBJ,KAAK,CAACK,aADxB,CAJF,CADF,EASE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BACoBL,KAAK,CAACM,cAD1B,CADF,EAIE;AAAG,MAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACWN,KAAK,CAACO,eADjB,CAJF,CATF,EAiBE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACYrD,YAAY,CAAC8C,KAAK,CAACQ,KAAP,CADxB,CADF,EAIE;AACE,MAAA,OAAO,EAAEd,aADX;AAEE,qBAAY,OAFd;AAGE,qBAAY,eAHd;AAIE,MAAA,SAAS,EAAC,6BAJZ;AAKE,MAAA,KAAK,EAAE;AACLe,QAAAA,SAAS,EAAE,SADN;AAELC,QAAAA,QAAQ,EAAE,QAFL;AAGLC,QAAAA,OAAO,EAAE;AAHJ,OALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJF,CAjBF,CADF,CALF,CADF,EA6CE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA7CF,CADF;AAiDD,GAlDA,CADH,CADD,GAuDC;AAAI,IAAA,SAAS,EAAC,oBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAzEJ,EA4EE;AACE,IAAA,SAAS,EAAC,YADZ;AAEE,IAAA,EAAE,EAAC,cAFL;AAGE,IAAA,QAAQ,EAAC,IAHX;AAIE,IAAA,IAAI,EAAC,QAJP;AAKE,uBAAgB,mBALlB;AAME,mBAAY,MANd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQE;AAAK,IAAA,SAAS,EAAC,cAAf;AAA8B,IAAA,IAAI,EAAC,UAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,SAAS,EAAC,aAAd;AAA4B,IAAA,EAAE,EAAC,mBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAIE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,SAAS,EAAC,OAFZ;AAGE,cAAO,OAHT;AAIE,kBAAW,OAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAME;AAAM,mBAAY,MAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YANF,CAJF,CADF,EAcE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAdF,EAeE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,SAAS,EAAC,mBAFZ;AAGE,oBAAa,OAHf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,EAQE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,SAAS,EAAC,iBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBARF,CAfF,CADF,CARF,CA5EF,CADF;AAsHD;;GA/LQlD,O;;KAAAA,O;AAiMT,eAAeA,OAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport cookie from \"js-cookie\";\r\nimport axios from \"axios\";\r\nimport { formatNumber } from \"../../helpers/function\";\r\nimport {\r\n  decryptInfoData,\r\n  encryptInfoData,\r\n} from \"../../store/actions/infoActions\";\r\n\r\nlet host = process.env.API_URL;\r\n\r\nfunction Profile() {\r\n  const [history, sethistory] = useState([]);\r\n  const [user, setUser] = useState(null);\r\n  const [orderDetails, setorderDetails] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let token = cookie.get(\"_wus_BJK\");\r\n    if (!token) {\r\n      // window.location.href = \"/\";\r\n    } else {\r\n      fetchOrders(token);\r\n      fetchUserInfo(token);\r\n    }\r\n  }, []);\r\n\r\n  const fetchUserInfo = async (token) => {\r\n    try {\r\n      let res = await axios.get(`${host}/api/user/user/details`, {\r\n        headers: {\r\n          Authorization: `${token}`,\r\n        },\r\n      });\r\n\r\n      if (res) {\r\n        setUser(res.data.userDetails);\r\n        let decryptedData = decryptInfoData();\r\n        console.log(decryptedData);\r\n        encryptInfoData(...decryptedData, {\r\n          billing_firstName: {\r\n            value: res.data.userDetails.first_name,\r\n            error: \"\",\r\n          },\r\n          billing_lastName: {\r\n            value: res.data.userDetails.last_name,\r\n            error: \"\",\r\n          },\r\n        });\r\n      }\r\n      console.log(res);\r\n    } catch (error) {\r\n      if (error.response.status == 401) {\r\n        cookie.remove(\"_wus_BJK\");\r\n        window.location.href = \"/\";\r\n      }\r\n    }\r\n  };\r\n\r\n  const fetchOrders = async (token) => {\r\n    try {\r\n      let res = await axios.get(`${host}/api/user/order/history`, {\r\n        headers: {\r\n          Authorization: `${token}`,\r\n        },\r\n      });\r\n\r\n      if (res) {\r\n        sethistory(res.data.orders);\r\n      }\r\n      console.log(res);\r\n    } catch (error) {\r\n      if (error.response.status == 401) {\r\n        cookie.remove(\"_wus_BJK\");\r\n        window.location.href = \"/\";\r\n      }\r\n\r\n      if (error.response.data.err == \"user order history not found\") {\r\n        sethistory([]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDetails = () => {};\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-md-4\">\r\n        <div className=\"card\" style={{ marginLeft: \"1.7rem\" }}>\r\n          <div className=\"card-body m-auto text-center\">\r\n            <img\r\n              src=\"https://t3.ftcdn.net/jpg/03/39/45/96/360_F_339459697_XAFacNQmwnvJRqe1Fe9VOptPWMUxlZP8.jpg\"\r\n              alt=\"\"\r\n              height=\"100\"\r\n              style={{ borderRadius: \"50%\", marginBottom: \"1rem\" }}\r\n            />\r\n            <h5 className=\"card-title\">\r\n              {user ? user.first_name : \"N/A\"} {user ? user.last_name : \"N/A\"}\r\n            </h5>\r\n            {/* <button className=\"btn btn-link\">Order History</button> */}\r\n            {/* <button className=\"btn btn-link\">Update Profile</button> */}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {history.length ? (\r\n        <div className=\"col-md-8\">\r\n          {history.map((order, i) => {\r\n            return (\r\n              <>\r\n                <div key={i} class=\"card\">\r\n                  <div className=\"card-header\">\r\n                    <h5>{order.order_name}</h5>\r\n                    <p>{order.created_at}</p>\r\n                  </div>\r\n                  <div className=\"card-body\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-md-4\">\r\n                        <p className=\"card-text\">\r\n                          Delivery Date: {order.delivery_date}\r\n                        </p>\r\n                        <p className=\"card-text\">\r\n                          Delivery Time: {order.delivery_time}\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"col-md-4\">\r\n                        <p className=\"card-text\">\r\n                          Mode Of Payment: {order.payment_method}\r\n                        </p>\r\n                        <p className=\"card-text\">\r\n                          Status: {order.order_status_id}\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"col-md-4\">\r\n                        <p className=\"card-text\">\r\n                          Amount: P{formatNumber(order.total)}\r\n                        </p>\r\n                        <button\r\n                          onClick={handleDetails}\r\n                          data-toggle=\"modal\"\r\n                          data-target=\"#exampleModal\"\r\n                          className=\"btn btn-primary btn-details\"\r\n                          style={{\r\n                            marginTop: \"-0.5rem\",\r\n                            fontSize: \"0.8rem\",\r\n                            padding: \"0.7rem\",\r\n                          }}\r\n                        >\r\n                          View Details\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <hr />\r\n              </>\r\n            );\r\n          })}\r\n        </div>\r\n      ) : (\r\n        <h2 className=\"text-center m-auto\">Order history is empty.</h2>\r\n      )}\r\n\r\n      <div\r\n        className=\"modal fade\"\r\n        id=\"exampleModal\"\r\n        tabIndex=\"-1\"\r\n        role=\"dialog\"\r\n        aria-labelledby=\"exampleModalLabel\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <div className=\"modal-dialog\" role=\"document\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h5 className=\"modal-title\" id=\"exampleModalLabel\">\r\n                Modal title\r\n              </h5>\r\n              <button\r\n                type=\"button\"\r\n                className=\"close\"\r\n                data-d=\"modal\"\r\n                aria-label=\"Close\"\r\n              >\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">...</div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-secondary\"\r\n                data-dismiss=\"modal\"\r\n              >\r\n                Close\r\n              </button>\r\n              <button type=\"button\" className=\"btn btn-primary\">\r\n                Save changes\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n"]},"metadata":{},"sourceType":"module"}