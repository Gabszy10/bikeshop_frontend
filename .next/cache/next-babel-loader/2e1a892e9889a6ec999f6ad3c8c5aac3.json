{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect, useState } from \"react\";\nimport cookie from \"js-cookie\";\nimport axios from \"axios\";\nimport { formatNumber } from \"../../helpers/function\";\nlet host = process.env.API_URL;\n\nfunction Profile() {\n  const {\n    0: history,\n    1: sethistory\n  } = useState([]);\n  const {\n    0: orderDetails,\n    1: setorderDetails\n  } = useState(null);\n  useEffect(() => {\n    let token = cookie.get(\"_wus_BJK\");\n\n    if (!token) {// window.location.href = \"/\";\n    } else {\n      fetchOrders(token);\n    }\n  }, []);\n\n  const fetchOrders = async token => {\n    try {\n      let res = await axios.get(`${host}/api/user/order/history`, {\n        headers: {\n          Authorization: `${token}`\n        }\n      });\n\n      if (res) {\n        sethistory(res.data.orders);\n      }\n\n      console.log(res);\n    } catch (error) {\n      if (error.response.status == 401) {\n        cookie.remove(\"_wus_BJK\");\n        window.location.href = \"/\";\n      }\n\n      if (error.response.data.err == \"user order history not found\") {\n        sethistory([]);\n      }\n    }\n  };\n\n  const handleDetails = () => {};\n\n  return __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-md-4\"\n  }, __jsx(\"div\", {\n    className: \"card\",\n    style: {\n      marginLeft: \"1.7rem\"\n    }\n  }, __jsx(\"div\", {\n    className: \"card-body m-auto text-center\"\n  }, __jsx(\"img\", {\n    src: \"https://images.unsplash.com/photo-1526047932273-341f2a7631f9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60\",\n    alt: \"\",\n    height: \"100\",\n    style: {\n      borderRadius: \"50%\",\n      marginBottom: \"1rem\"\n    }\n  }), __jsx(\"h5\", {\n    className: \"card-title\"\n  }, \"I-Wheels\"), __jsx(\"button\", {\n    className: \"btn btn-link\"\n  }, \"Order History\"), __jsx(\"button\", {\n    className: \"btn btn-link\"\n  }, \"Update Profile\")))), history.length ? __jsx(\"div\", {\n    className: \"col-md-8\"\n  }, history.map((order, i) => {\n    return __jsx(React.Fragment, null, __jsx(\"div\", {\n      key: i,\n      class: \"card\"\n    }, __jsx(\"div\", {\n      className: \"card-header\"\n    }, __jsx(\"h5\", null, order.order_name), __jsx(\"p\", null, order.created_at)), __jsx(\"div\", {\n      className: \"card-body\"\n    }, __jsx(\"div\", {\n      className: \"row\"\n    }, __jsx(\"div\", {\n      className: \"col-md-4\"\n    }, __jsx(\"p\", {\n      className: \"card-text\"\n    }, \"Delivery Date: \", order.delivery_date), __jsx(\"p\", {\n      className: \"card-text\"\n    }, \"Delivery Time: \", order.delivery_time)), __jsx(\"div\", {\n      className: \"col-md-4\"\n    }, __jsx(\"p\", {\n      className: \"card-text\"\n    }, \"Mode Of Payment: \", order.payment_method), __jsx(\"p\", {\n      className: \"card-text\"\n    }, \"Status: \", order.order_status_id)), __jsx(\"div\", {\n      className: \"col-md-4\"\n    }, __jsx(\"p\", {\n      className: \"card-text\"\n    }, \"Amount: P\", formatNumber(order.total)), __jsx(\"button\", {\n      onClick: handleDetails,\n      \"data-toggle\": \"modal\",\n      \"data-target\": \"#exampleModal\",\n      className: \"btn btn-primary btn-details\",\n      style: {\n        marginTop: \"-0.5rem\",\n        fontSize: \"0.8rem\",\n        padding: \"0.7rem\"\n      }\n    }, \"View Details\"))))), __jsx(\"hr\", null));\n  })) : __jsx(\"h2\", {\n    className: \"text-center m-auto\"\n  }, \"Order history is empty.\"), __jsx(\"div\", {\n    className: \"modal fade\",\n    id: \"exampleModal\",\n    tabIndex: \"-1\",\n    role: \"dialog\",\n    \"aria-labelledby\": \"exampleModalLabel\",\n    \"aria-hidden\": \"true\"\n  }, __jsx(\"div\", {\n    className: \"modal-dialog\",\n    role: \"document\"\n  }, __jsx(\"div\", {\n    className: \"modal-content\"\n  }, __jsx(\"div\", {\n    className: \"modal-header\"\n  }, __jsx(\"h5\", {\n    className: \"modal-title\",\n    id: \"exampleModalLabel\"\n  }, \"Modal title\"), __jsx(\"button\", {\n    type: \"button\",\n    className: \"close\",\n    \"data-d\": \"modal\",\n    \"aria-label\": \"Close\"\n  }, __jsx(\"span\", {\n    \"aria-hidden\": \"true\"\n  }, \"\\xD7\"))), __jsx(\"div\", {\n    className: \"modal-body\"\n  }, \"...\"), __jsx(\"div\", {\n    className: \"modal-footer\"\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    \"data-dismiss\": \"modal\"\n  }, \"Close\"), __jsx(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\"\n  }, \"Save changes\"))))));\n}\n\nexport default Profile;","map":null,"metadata":{},"sourceType":"module"}