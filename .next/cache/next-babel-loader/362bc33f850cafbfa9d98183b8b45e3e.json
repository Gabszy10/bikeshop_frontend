{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\corde\\\\Desktop\\\\New folder\\\\bikeshop\\\\bikeshop_frontend\\\\components\\\\cart\\\\CartProduct.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport { connect, useDispatch } from \"react-redux\";\nimport { removeItem as _removeItem, addQuantity as _addQuantity, subtractQuantity as _subtractQuantity, decryptData, encryptData } from \"../../store/actions/cartActions\";\nimport { ToastContainer, toast, Slide } from \"react-toastify\";\nimport { debounce, formatNumber } from \"../../helpers/function\";\n\nfunction CartProduct(props) {\n  _s();\n\n  var _this = this;\n\n  var dispatch = useDispatch();\n\n  var _useState = useState([]),\n      cart = _useState[0],\n      setcart = _useState[1];\n\n  var host = process.env.API_URL;\n  useEffect(function () {\n    var encryptedData = localStorage.getItem(process.env.CART_COOKIE) ? localStorage.getItem(process.env.CART_COOKIE) : [];\n    var myProd = decryptData(encryptedData);\n    setcart(myProd);\n    props.setcart(myProd);\n  }, [props.products]);\n\n  var handleRemove = function handleRemove(id) {\n    props.removeItem(id);\n    toast.error(\"Removed from cart\", {\n      position: \"bottom-left\",\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true\n    });\n    props.setcart([]);\n  }; //\n\n\n  var handleQuantity = debounce(function (e, product) {\n    var cartStorage = localStorage.getItem(process.env.CART_COOKIE);\n    var cartArray = decryptData(cartStorage);\n    var index = cartArray.findIndex(function (item) {\n      return item.id === product.id;\n    });\n\n    if (index > -1) {\n      cartArray[index][\"quantity\"] = e;\n    }\n\n    var encryptedData = encryptData(JSON.stringify(cartArray));\n    localStorage.setItem(process.env.CART_COOKIE, encryptedData);\n    setcart(cartArray);\n    props.setcart([]);\n    dispatch(function () {\n      return {\n        type: \"UPDATE_CART\"\n      };\n    }());\n  }, 250);\n  var cartItems = cart.length ? cart.map(function (data, idx) {\n    return __jsx(\"tr\", {\n      key: idx,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }, __jsx(\"td\", {\n      className: \"product-thumbnail\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }\n    }, __jsx(Link, {\n      href: \"/product/\".concat(data.slug),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }, __jsx(\"a\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 15\n      }\n    }, __jsx(\"img\", {\n      src: \"\".concat(host, \"/products/\").concat(data.product_images[0][\"file_name\"]),\n      alt: \"image\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    })))), __jsx(\"td\", {\n      className: \"product-name\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }\n    }, __jsx(Link, {\n      href: \"#\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, __jsx(\"a\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 15\n      }\n    }, data.name))), __jsx(\"td\", {\n      className: \"product-quantity\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    }, __jsx(\"div\", {\n      className: \"input-counter\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }, __jsx(\"input\", {\n      type: \"number\",\n      defaultValue: data.quantity,\n      min: \"1\",\n      max: 100,\n      readOnly: false,\n      onChange: function onChange(e) {\n        return handleQuantity(e.target.value, data);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 15\n      }\n    }))), __jsx(\"td\", {\n      className: \"product-price\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }\n    }, __jsx(\"span\", {\n      className: \"unit-amount\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }\n    }, \"\\u20B1\", props.isCampaign ? formatNumber(data.campaign_price) : formatNumber(data.discount_price))), __jsx(\"td\", {\n      className: \"product-subtotal\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }\n    }, __jsx(\"span\", {\n      className: \"subtotal-amount\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    }, \"\\u20B1\", props.isCampaign ? formatNumber(data.campaign_price * data.quantity) : formatNumber(data.discount_price * data.quantity))), __jsx(\"td\", {\n      className: \"product-subtotal\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }\n    }, __jsx(Link, {\n      href: \"#\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 13\n      }\n    }, __jsx(\"a\", {\n      style: {\n        \"float\": \"none\"\n      },\n      className: \"remove\",\n      onClick: function onClick(e) {\n        e.preventDefault();\n        handleRemove(data.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 15\n      }\n    }, __jsx(\"i\", {\n      className: \"far fa-trash-alt\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }\n    })))));\n  }) : __jsx(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 5\n    }\n  }, __jsx(\"td\", {\n    className: \"product-thumbnail\",\n    colSpan: \"5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }, \"Empty.\")));\n  return __jsx(React.Fragment, null, __jsx(ToastContainer, {\n    transition: Slide,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }\n  }), __jsx(\"table\", {\n    className: \"table table-bordered\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }\n  }, __jsx(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  }, __jsx(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  }, __jsx(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, \"Product\"), __jsx(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  }, \"Name\"), __jsx(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }\n  }, \"Quantity\"), __jsx(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }\n  }, \"Unit Price\"), __jsx(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }\n  }, \"Total\"), __jsx(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }, \"REMOVE\"))), __jsx(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }\n  }, cartItems)));\n}\n\n_s(CartProduct, \"zwrgs5CTvQY7lPOvqFuDTpjmREY=\", false, function () {\n  return [useDispatch];\n});\n\n_c = CartProduct;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    products: state.addedItems,\n    total: state.total\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    removeItem: function removeItem(id) {\n      dispatch(_removeItem(id));\n    },\n    addQuantity: function addQuantity(id) {\n      dispatch(_addQuantity(id));\n    },\n    subtractQuantity: function subtractQuantity(id) {\n      dispatch(_subtractQuantity(id));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CartProduct);\n\nvar _c;\n\n$RefreshReg$(_c, \"CartProduct\");","map":{"version":3,"sources":["C:/Users/corde/Desktop/New folder/bikeshop/bikeshop_frontend/components/cart/CartProduct.js"],"names":["React","useEffect","useState","Link","connect","useDispatch","removeItem","addQuantity","subtractQuantity","decryptData","encryptData","ToastContainer","toast","Slide","debounce","formatNumber","CartProduct","props","dispatch","cart","setcart","host","process","env","API_URL","encryptedData","localStorage","getItem","CART_COOKIE","myProd","products","handleRemove","id","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","handleQuantity","e","product","cartStorage","cartArray","index","findIndex","item","JSON","stringify","setItem","type","cartItems","length","map","data","idx","slug","product_images","name","quantity","target","value","isCampaign","campaign_price","discount_price","preventDefault","mapStateToProps","state","addedItems","total","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { connect, useDispatch } from \"react-redux\";\r\nimport {\r\n  removeItem,\r\n  addQuantity,\r\n  subtractQuantity,\r\n  decryptData,\r\n  encryptData,\r\n} from \"../../store/actions/cartActions\";\r\nimport { ToastContainer, toast, Slide } from \"react-toastify\";\r\nimport { debounce, formatNumber } from \"../../helpers/function\";\r\n\r\nfunction CartProduct(props) {\r\n  const dispatch = useDispatch();\r\n  const [cart, setcart] = useState([]);\r\n  let host = process.env.API_URL;\r\n\r\n  useEffect(() => {\r\n    let encryptedData = localStorage.getItem(process.env.CART_COOKIE)\r\n      ? localStorage.getItem(process.env.CART_COOKIE)\r\n      : [];\r\n\r\n    let myProd = decryptData(encryptedData);\r\n    setcart(myProd);\r\n    props.setcart(myProd);\r\n  }, [props.products]);\r\n\r\n  const handleRemove = (id) => {\r\n    props.removeItem(id);\r\n\r\n    toast.error(\"Removed from cart\", {\r\n      position: \"bottom-left\",\r\n      autoClose: 5000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n    });\r\n\r\n    props.setcart([]);\r\n  };\r\n\r\n  //\r\n  const handleQuantity = debounce((e, product) => {\r\n    let cartStorage = localStorage.getItem(process.env.CART_COOKIE);\r\n    let cartArray = decryptData(cartStorage);\r\n    var index = cartArray.findIndex((item) => item.id === product.id);\r\n\r\n    if (index > -1) {\r\n      cartArray[index][\"quantity\"] = e;\r\n    }\r\n\r\n    let encryptedData = encryptData(JSON.stringify(cartArray));\r\n\r\n    localStorage.setItem(process.env.CART_COOKIE, encryptedData);\r\n\r\n    setcart(cartArray);\r\n    props.setcart([]);\r\n    dispatch(\r\n      (() => {\r\n        return {\r\n          type: \"UPDATE_CART\",\r\n        };\r\n      })()\r\n    );\r\n  }, 250);\r\n\r\n  let cartItems = cart.length ? (\r\n    cart.map((data, idx) => {\r\n      return (\r\n        <tr key={idx}>\r\n          <td className=\"product-thumbnail\">\r\n            <Link href={`/product/${data.slug}`}>\r\n              <a>\r\n                <img\r\n                  src={`${host}/products/${data.product_images[0][\"file_name\"]}`}\r\n                  alt=\"image\"\r\n                />\r\n              </a>\r\n            </Link>\r\n          </td>\r\n\r\n          <td className=\"product-name\">\r\n            <Link href=\"#\">\r\n              <a>{data.name}</a>\r\n            </Link>\r\n            {/* <ul>\r\n              <li>\r\n                Color: <strong>Light Blue</strong>\r\n              </li>\r\n              <li>\r\n                Size: <strong>XL</strong>\r\n              </li>\r\n              <li>\r\n                Material: <strong>Cotton</strong>\r\n              </li>\r\n            </ul> */}\r\n          </td>\r\n\r\n          <td className=\"product-quantity\">\r\n            <div className=\"input-counter\">\r\n              {/* <span\r\n                className=\"minus-btn\"\r\n                onClick={() => {\r\n                  handleSubtractQuantity(data.id);\r\n                }}\r\n              >\r\n                <i className=\"fas fa-minus\"></i>\r\n              </span> */}\r\n              <input\r\n                type=\"number\"\r\n                defaultValue={data.quantity}\r\n                min=\"1\"\r\n                max={100}\r\n                readOnly={false}\r\n                onChange={(e) => handleQuantity(e.target.value, data)}\r\n              />\r\n              {/* <span\r\n                className=\"plus-btn\"\r\n                onClick={() => {\r\n                  handleAddQuantity(data.id);\r\n                }}\r\n              >\r\n                <i className=\"fas fa-plus\"></i>\r\n              </span> */}\r\n            </div>\r\n          </td>\r\n\r\n          <td className=\"product-price\">\r\n            <span className=\"unit-amount\">\r\n              ₱\r\n              {props.isCampaign\r\n                ? formatNumber(data.campaign_price)\r\n                : formatNumber(data.discount_price)}\r\n            </span>\r\n          </td>\r\n\r\n          <td className=\"product-subtotal\">\r\n            <span className=\"subtotal-amount\">\r\n              ₱\r\n              {props.isCampaign\r\n                ? formatNumber(data.campaign_price * data.quantity)\r\n                : formatNumber(data.discount_price * data.quantity)}\r\n            </span>\r\n          </td>\r\n\r\n          <td className=\"product-subtotal\">\r\n            <Link href=\"#\">\r\n              <a\r\n                style={{ float: \"none\" }}\r\n                className=\"remove\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  handleRemove(data.id);\r\n                }}\r\n              >\r\n                <i className=\"far fa-trash-alt\"></i>\r\n              </a>\r\n            </Link>\r\n          </td>\r\n        </tr>\r\n      );\r\n    })\r\n  ) : (\r\n    <tr>\r\n      <td className=\"product-thumbnail\" colSpan=\"5\">\r\n        <p>Empty.</p>\r\n      </td>\r\n    </tr>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <ToastContainer transition={Slide} />\r\n      <table className=\"table table-bordered\">\r\n        <thead>\r\n          <tr>\r\n            <th scope=\"col\">Product</th>\r\n            <th scope=\"col\">Name</th>\r\n            <th scope=\"col\">Quantity</th>\r\n            <th scope=\"col\">Unit Price</th>\r\n            <th scope=\"col\">Total</th>\r\n            <th scope=\"col\">REMOVE</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>{cartItems}</tbody>\r\n      </table>\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    products: state.addedItems,\r\n    total: state.total,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    removeItem: (id) => {\r\n      dispatch(removeItem(id));\r\n    },\r\n    addQuantity: (id) => {\r\n      dispatch(addQuantity(id));\r\n    },\r\n    subtractQuantity: (id) => {\r\n      dispatch(subtractQuantity(id));\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CartProduct);\r\n"]},"metadata":{},"sourceType":"module"}