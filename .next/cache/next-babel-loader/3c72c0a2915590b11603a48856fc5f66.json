{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\corde\\\\Desktop\\\\New folder\\\\Gabszy Flower\\\\gabszy-flower-frontend\\\\components\\\\cart\\\\CartContent.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport Router from \"next/router\";\nimport { connect } from \"react-redux\";\nimport CartProduct from \"./CartProduct\";\nimport { ToastContainer, toast, Slide } from \"react-toastify\";\nimport { formatNumber, isDateBeforeToday } from \"../../helpers/function\";\nimport { addToCartAddons as _addToCartAddons, decryptData } from \"../../store/actions/cartActions\";\nimport Calendar from \"../calendar/Calendar\";\nimport { decryptInfoData, encryptInfoData } from \"../../store/actions/infoActions\";\nimport ForceAddon from \"../shop-style-one/ForceAddon\";\n\nfunction CartContent(props) {\n  _s();\n\n  var _useState = useState([]),\n      cart = _useState[0],\n      setcart = _useState[1];\n\n  var _useState2 = useState(0),\n      total = _useState2[0],\n      settotal = _useState2[1];\n\n  var _useState3 = useState([]),\n      addon = _useState3[0],\n      setAddon = _useState3[1];\n\n  var _useState4 = useState(false),\n      isCampaign = _useState4[0],\n      setisCampaign = _useState4[1];\n\n  var _useState5 = useState({\n    delivery_date: \"\",\n    delivery_time: \"\",\n    note: \"\",\n    message: \"\"\n  }),\n      state = _useState5[0],\n      setstate = _useState5[1];\n\n  useEffect(function () {\n    var decryptedData = decryptInfoData();\n\n    if (decryptedData) {\n      if (decryptedData.delivery_date.value == \"2021-02-14\") {\n        setisCampaign(true);\n      }\n\n      setstate({\n        delivery_date: decryptedData.delivery_date.value,\n        delivery_time: decryptedData.delivery_time.value,\n        note: decryptedData.note.value,\n        message: decryptedData.message.value\n      });\n    }\n  }, []);\n  useEffect(function () {}, [addon]);\n  useEffect(function () {\n    var encryptedData = localStorage.getItem(process.env.CART_COOKIE) ? localStorage.getItem(process.env.CART_COOKIE) : [];\n    var myProd = decryptData(encryptedData);\n\n    if (myProd.length <= 0) {\n      alert(\"You dont have any items in your cart.\");\n      return window.location.href = \"/\";\n    }\n\n    var myTotal = 0;\n\n    for (var i = 0; i < myProd.length; i++) {\n      if (isCampaign) {\n        myTotal = myTotal + myProd[i].campaign_price * myProd[i].quantity;\n      } else {\n        myTotal = myTotal + myProd[i].discount_price * myProd[i].quantity;\n      }\n    }\n\n    var addonTotal = 0;\n    addon.forEach(function (item, i) {\n      addonTotal += item.discount_price;\n    });\n    settotal(myTotal + addonTotal);\n  }, [cart, isCampaign, addon]);\n\n  function handleOnChange(event) {\n    var name = event.target.name;\n    var value = event.target.value;\n    console.log(name, value);\n    setstate(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, _defineProperty({}, name, value));\n    }); // handleStateChange(event);\n  }\n\n  function handleCalendarChange(e) {\n    var name = e.target.name;\n    var value = e.target.value;\n\n    if (value == \"2021-02-14\") {\n      setisCampaign(true);\n    } else {\n      setisCampaign(false);\n    }\n\n    setstate(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, _defineProperty({}, name, value));\n    });\n  }\n\n  var isValid = function isValid() {\n    if (!state.delivery_date) {\n      toast.error(\"Please select delivery date.\", {\n        position: \"bottom-left\",\n        autoClose: 2000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n      return false;\n    } else if (!state.delivery_time) {\n      toast.error(\"Please select delivery time.\", {\n        position: \"bottom-left\",\n        autoClose: 2000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n      return false;\n    } else if (isDateBeforeToday(state.delivery_date)) {\n      toast.error(\"Please select present date.\", {\n        position: \"bottom-left\",\n        autoClose: 2000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  var proceedToCheckout = function proceedToCheckout() {\n    if (isValid()) {\n      if (addon.length) {\n        props.addToCartAddons(addon, 1);\n      }\n\n      var delivery_date = state.delivery_date,\n          delivery_time = state.delivery_time,\n          note = state.note,\n          message = state.message;\n      var decryptedData = decryptInfoData();\n\n      if (decryptedData) {\n        var obj = _objectSpread(_objectSpread({}, decryptedData), {}, {\n          note: {\n            value: note,\n            error: \"\"\n          },\n          message: {\n            value: message,\n            error: \"\"\n          },\n          delivery_date: {\n            value: delivery_date,\n            error: \"\"\n          },\n          delivery_time: {\n            value: delivery_time,\n            error: \"\"\n          }\n        });\n\n        encryptInfoData(obj);\n      } else {\n        var _obj = {\n          shipping_firstName: {\n            value: \"\",\n            error: \"\"\n          },\n          shipping_lastName: {\n            value: \"\",\n            error: \"\"\n          },\n          shipping_address: {\n            value: \"\",\n            error: \"\"\n          },\n          shipping_city: {\n            value: \"\",\n            error: \"\"\n          },\n          shipping_zip: {\n            value: \"\",\n            error: \"\"\n          },\n          billing_email: {\n            value: \"\",\n            error: \"\"\n          },\n          shipping_phone: {\n            value: \"\",\n            error: \"\"\n          },\n          billing_firstName: {\n            value: \"\",\n            error: \"\"\n          },\n          billing_lastName: {\n            value: \"\",\n            error: \"\"\n          },\n          billing_phone: {\n            value: \"\",\n            error: \"\"\n          },\n          note: {\n            value: note,\n            error: \"\"\n          },\n          message: {\n            value: message,\n            error: \"\"\n          },\n          delivery_date: {\n            value: delivery_date,\n            error: \"\"\n          },\n          delivery_time: {\n            value: delivery_time,\n            error: \"\"\n          }\n        };\n        encryptInfoData(_obj);\n      }\n\n      Router.push(\"/checkout\");\n    }\n  };\n\n  return __jsx(\"section\", {\n    className: \"cart-area ptb-60\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 5\n    }\n  }, __jsx(ToastContainer, {\n    transition: Slide,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"col-lg-12 col-md-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 11\n    }\n  }, __jsx(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"cart-table table-responsive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 15\n    }\n  }, __jsx(CartProduct, {\n    setcart: setcart,\n    isCampaign: isCampaign,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 17\n    }\n  })), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 15\n    }\n  }), __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"col-lg-6 col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 19\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 21\n    }\n  }, \"Delivery Time\"), __jsx(\"div\", {\n    \"class\": \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 21\n    }\n  }, __jsx(\"select\", {\n    \"class\": \"form-control\",\n    id: \"exampleFormControlSelect1\",\n    name: \"delivery_time\",\n    onChange: handleOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 23\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 25\n    }\n  }, \"Select time\"), __jsx(\"option\", {\n    value: \"9am - 2pm\",\n    selected: state.delivery_time == \"9am - 2pm\" ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 25\n    }\n  }, \"9am - 2pm\"), __jsx(\"option\", {\n    value: \"2pm - 5pm\",\n    selected: state.delivery_time == \"2pm - 5pm\" ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 25\n    }\n  }, \"2pm - 6pm\"), __jsx(\"option\", {\n    value: \"6pm - 9pm\",\n    selected: state.delivery_time == \"6pm - 9pm\" ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 25\n    }\n  }, \"6pm - 9pm\"), __jsx(\"option\", {\n    value: \"Anytime\",\n    selected: state.delivery_time == \"Anytime\" ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 25\n    }\n  }, \"Anytime\"))))), __jsx(\"div\", {\n    className: \"col-lg-6 col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 17\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 19\n    }\n  }, \"Delivery Date\"), __jsx(\"div\", {\n    \"class\": \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 19\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    value: state.delivery_date,\n    readOnly: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 21\n    }\n  })), __jsx(Calendar, {\n    handleStateChange: handleCalendarChange,\n    date: state.delivery_date != \"\" ? state.delivery_date : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 19\n    }\n  }))), __jsx(\"div\", {\n    className: \"col-lg-12 col-md-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 17\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 19\n    }\n  }, \"Delivery Instruction (Optional)\", \" \", __jsx(\"span\", {\n    className: \"required\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 21\n    }\n  }, \"*\")), __jsx(\"textarea\", {\n    name: \"note\",\n    id: \"notes\",\n    cols: \"30\",\n    rows: \"6\",\n    value: state.note,\n    onChange: handleOnChange,\n    placeholder: \"Instruction to delivery rider\",\n    className: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 19\n    }\n  }))), __jsx(\"div\", {\n    className: \"col-lg-12 col-md-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 17\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 19\n    }\n  }, \"Message (Optional) \", __jsx(\"span\", {\n    className: \"required\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 40\n    }\n  }, \"*\")), __jsx(\"textarea\", {\n    name: \"message\",\n    id: \"messages\",\n    cols: \"30\",\n    rows: \"6\",\n    value: state.message,\n    onChange: handleOnChange,\n    placeholder: \"Your message to receiver\",\n    className: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 19\n    }\n  }))), __jsx(ForceAddon, {\n    setAddon: setAddon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 15\n    }\n  }), __jsx(\"div\", {\n    className: \"cart-totals\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 15\n    }\n  }, __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 17\n    }\n  }, \"Cart Totals\"), __jsx(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 17\n    }\n  }, __jsx(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 19\n    }\n  }, \"Subtotal \", __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 30\n    }\n  }, \"\\u20B1\", formatNumber(total))), __jsx(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 19\n    }\n  }, \"Total\", \" \", __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 21\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 23\n    }\n  }, \"\\u20B1\", formatNumber(total))))), total < 800 && __jsx(\"p\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 19\n    }\n  }, \"Minimum order is \\u20B1800. If order is below \\u20B1800, you will be charge to get to the 800 limit.\"), __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 19\n    }\n  }, __jsx(Link, {\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 21\n    }\n  }, __jsx(\"a\", {\n    style: {\n      marginBottom: \"0.5rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 23\n    }\n  }, __jsx(\"i\", {\n    className: \"fas fa-angle-double-left\",\n    style: {\n      marginRight: \"5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 25\n    }\n  }), \"Back to Shop\"))), __jsx(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 19\n    }\n  }, __jsx(\"button\", {\n    type: \"button\",\n    onClick: proceedToCheckout,\n    className: \"btn btn-light proceed-checkout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 21\n    }\n  }, \"CONTINUE\")))))))));\n}\n\n_s(CartContent, \"h46+CaYsf/VipvJMXE2Q/JTClfA=\");\n\n_c = CartContent;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    products: state.addedItems,\n    total: state.total,\n    shipping: state.shipping\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    addShipping: function addShipping() {\n      dispatch({\n        type: \"ADD_SHIPPING\"\n      });\n    },\n    substractShipping: function substractShipping() {\n      dispatch({\n        type: \"SUB_SHIPPING\"\n      });\n    },\n    addToCartAddons: function addToCartAddons(products, qty) {\n      dispatch(_addToCartAddons(products, qty));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CartContent);\n\nvar _c;\n\n$RefreshReg$(_c, \"CartContent\");","map":{"version":3,"sources":["C:/Users/corde/Desktop/New folder/Gabszy Flower/gabszy-flower-frontend/components/cart/CartContent.js"],"names":["React","useEffect","useState","Link","Router","connect","CartProduct","ToastContainer","toast","Slide","formatNumber","isDateBeforeToday","addToCartAddons","decryptData","Calendar","decryptInfoData","encryptInfoData","ForceAddon","CartContent","props","cart","setcart","total","settotal","addon","setAddon","isCampaign","setisCampaign","delivery_date","delivery_time","note","message","state","setstate","decryptedData","value","encryptedData","localStorage","getItem","process","env","CART_COOKIE","myProd","length","alert","window","location","href","myTotal","i","campaign_price","quantity","discount_price","addonTotal","forEach","item","handleOnChange","event","name","target","console","log","prevState","handleCalendarChange","e","isValid","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","proceedToCheckout","obj","shipping_firstName","shipping_lastName","shipping_address","shipping_city","shipping_zip","billing_email","shipping_phone","billing_firstName","billing_lastName","billing_phone","push","color","marginBottom","marginRight","mapStateToProps","products","addedItems","shipping","mapDispatchToProps","dispatch","addShipping","type","substractShipping","qty"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport Router from \"next/router\";\r\nimport { connect } from \"react-redux\";\r\nimport CartProduct from \"./CartProduct\";\r\nimport { ToastContainer, toast, Slide } from \"react-toastify\";\r\nimport { formatNumber, isDateBeforeToday } from \"../../helpers/function\";\r\nimport { addToCartAddons, decryptData } from \"../../store/actions/cartActions\";\r\nimport Calendar from \"../calendar/Calendar\";\r\nimport {\r\n  decryptInfoData,\r\n  encryptInfoData,\r\n} from \"../../store/actions/infoActions\";\r\nimport ForceAddon from \"../shop-style-one/ForceAddon\";\r\n\r\nfunction CartContent(props) {\r\n  const [cart, setcart] = useState([]);\r\n  const [total, settotal] = useState(0);\r\n  const [addon, setAddon] = useState([]);\r\n  const [isCampaign, setisCampaign] = useState(false);\r\n  const [state, setstate] = useState({\r\n    delivery_date: \"\",\r\n    delivery_time: \"\",\r\n    note: \"\",\r\n    message: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    let decryptedData = decryptInfoData();\r\n\r\n    if (decryptedData) {\r\n      if (decryptedData.delivery_date.value == \"2021-02-14\") {\r\n        setisCampaign(true);\r\n      }\r\n\r\n      setstate({\r\n        delivery_date: decryptedData.delivery_date.value,\r\n        delivery_time: decryptedData.delivery_time.value,\r\n        note: decryptedData.note.value,\r\n        message: decryptedData.message.value,\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {}, [addon]);\r\n\r\n  useEffect(() => {\r\n    let encryptedData = localStorage.getItem(process.env.CART_COOKIE)\r\n      ? localStorage.getItem(process.env.CART_COOKIE)\r\n      : [];\r\n\r\n    let myProd = decryptData(encryptedData);\r\n\r\n    if (myProd.length <= 0) {\r\n      alert(\"You dont have any items in your cart.\");\r\n      return (window.location.href = \"/\");\r\n    }\r\n\r\n    var myTotal = 0;\r\n    for (var i = 0; i < myProd.length; i++) {\r\n      if (isCampaign) {\r\n        myTotal = myTotal + myProd[i].campaign_price * myProd[i].quantity;\r\n      } else {\r\n        myTotal = myTotal + myProd[i].discount_price * myProd[i].quantity;\r\n      }\r\n    }\r\n\r\n    let addonTotal = 0;\r\n    addon.forEach((item, i) => {\r\n      addonTotal += item.discount_price;\r\n    });\r\n\r\n    settotal(myTotal + addonTotal);\r\n  }, [cart, isCampaign, addon]);\r\n\r\n  function handleOnChange(event) {\r\n    const name = event.target.name;\r\n    const value = event.target.value;\r\n\r\n    console.log(name, value);\r\n\r\n    setstate((prevState) => ({\r\n      ...prevState,\r\n      [name]: value,\r\n    }));\r\n\r\n    // handleStateChange(event);\r\n  }\r\n\r\n  function handleCalendarChange(e) {\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n\r\n    if (value == \"2021-02-14\") {\r\n      setisCampaign(true);\r\n    } else {\r\n      setisCampaign(false);\r\n    }\r\n\r\n    setstate((prevState) => ({\r\n      ...prevState,\r\n      [name]: value,\r\n    }));\r\n  }\r\n\r\n  const isValid = () => {\r\n    if (!state.delivery_date) {\r\n      toast.error(\"Please select delivery date.\", {\r\n        position: \"bottom-left\",\r\n        autoClose: 2000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n      });\r\n      return false;\r\n    } else if (!state.delivery_time) {\r\n      toast.error(\"Please select delivery time.\", {\r\n        position: \"bottom-left\",\r\n        autoClose: 2000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n      });\r\n      return false;\r\n    } else if (isDateBeforeToday(state.delivery_date)) {\r\n      toast.error(\"Please select present date.\", {\r\n        position: \"bottom-left\",\r\n        autoClose: 2000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n      });\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  };\r\n\r\n  const proceedToCheckout = () => {\r\n    if (isValid()) {\r\n      if (addon.length) {\r\n        props.addToCartAddons(addon, 1);\r\n      }\r\n\r\n      const { delivery_date, delivery_time, note, message } = state;\r\n      let decryptedData = decryptInfoData();\r\n      if (decryptedData) {\r\n        let obj = {\r\n          ...decryptedData,\r\n          note: { value: note, error: \"\" },\r\n          message: { value: message, error: \"\" },\r\n          delivery_date: { value: delivery_date, error: \"\" },\r\n          delivery_time: { value: delivery_time, error: \"\" },\r\n        };\r\n        encryptInfoData(obj);\r\n      } else {\r\n        let obj = {\r\n          shipping_firstName: { value: \"\", error: \"\" },\r\n          shipping_lastName: { value: \"\", error: \"\" },\r\n          shipping_address: { value: \"\", error: \"\" },\r\n          shipping_city: { value: \"\", error: \"\" },\r\n          shipping_zip: { value: \"\", error: \"\" },\r\n          billing_email: { value: \"\", error: \"\" },\r\n          shipping_phone: { value: \"\", error: \"\" },\r\n          billing_firstName: { value: \"\", error: \"\" },\r\n          billing_lastName: { value: \"\", error: \"\" },\r\n          billing_phone: { value: \"\", error: \"\" },\r\n          note: { value: note, error: \"\" },\r\n          message: { value: message, error: \"\" },\r\n          delivery_date: { value: delivery_date, error: \"\" },\r\n          delivery_time: { value: delivery_time, error: \"\" },\r\n        };\r\n\r\n        encryptInfoData(obj);\r\n      }\r\n\r\n      Router.push(`/checkout`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"cart-area ptb-60\">\r\n      <ToastContainer transition={Slide} />\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-12 col-md-12\">\r\n            <form>\r\n              <div className=\"cart-table table-responsive\">\r\n                <CartProduct setcart={setcart} isCampaign={isCampaign} />\r\n              </div>\r\n\r\n              <br />\r\n\r\n              <div className=\"row\">\r\n                <div className=\"col-lg-6 col-md-6\">\r\n                  <div className=\"form-group\">\r\n                    <label>Delivery Time</label>\r\n                    <div class=\"form-group\">\r\n                      <select\r\n                        class=\"form-control\"\r\n                        id=\"exampleFormControlSelect1\"\r\n                        name=\"delivery_time\"\r\n                        onChange={handleOnChange}\r\n                      >\r\n                        <option value=\"\">Select time</option>\r\n                        <option\r\n                          value=\"9am - 2pm\"\r\n                          selected={\r\n                            state.delivery_time == \"9am - 2pm\" ? true : false\r\n                          }\r\n                        >\r\n                          9am - 2pm\r\n                        </option>\r\n                        <option\r\n                          value=\"2pm - 5pm\"\r\n                          selected={\r\n                            state.delivery_time == \"2pm - 5pm\" ? true : false\r\n                          }\r\n                        >\r\n                          2pm - 6pm\r\n                        </option>\r\n                        <option\r\n                          value=\"6pm - 9pm\"\r\n                          selected={\r\n                            state.delivery_time == \"6pm - 9pm\" ? true : false\r\n                          }\r\n                        >\r\n                          6pm - 9pm\r\n                        </option>\r\n                        <option\r\n                          value=\"Anytime\"\r\n                          selected={\r\n                            state.delivery_time == \"Anytime\" ? true : false\r\n                          }\r\n                        >\r\n                          Anytime\r\n                        </option>\r\n                      </select>\r\n                    </div>\r\n                    {/* {state.billing_phone.error && (\r\n                    <p style={errorStyle}>{state.billing_phone.error}</p>\r\n                  )} */}\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-lg-6 col-md-6\">\r\n                  <label>Delivery Date</label>\r\n                  <div class=\"form-group\">\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      value={state.delivery_date}\r\n                      readOnly\r\n                    />\r\n                  </div>\r\n                  <Calendar\r\n                    handleStateChange={handleCalendarChange}\r\n                    date={\r\n                      state.delivery_date != \"\" ? state.delivery_date : null\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-lg-12 col-md-12\">\r\n                <div className=\"form-group\">\r\n                  <label>\r\n                    Delivery Instruction (Optional){\" \"}\r\n                    <span className=\"required\">*</span>\r\n                  </label>\r\n                  <textarea\r\n                    name=\"note\"\r\n                    id=\"notes\"\r\n                    cols=\"30\"\r\n                    rows=\"6\"\r\n                    value={state.note}\r\n                    onChange={handleOnChange}\r\n                    placeholder=\"Instruction to delivery rider\"\r\n                    className=\"form-control\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-lg-12 col-md-12\">\r\n                <div className=\"form-group\">\r\n                  <label>\r\n                    Message (Optional) <span className=\"required\">*</span>\r\n                  </label>\r\n                  <textarea\r\n                    name=\"message\"\r\n                    id=\"messages\"\r\n                    cols=\"30\"\r\n                    rows=\"6\"\r\n                    value={state.message}\r\n                    onChange={handleOnChange}\r\n                    placeholder=\"Your message to receiver\"\r\n                    className=\"form-control\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <ForceAddon setAddon={setAddon} />\r\n\r\n              <div className=\"cart-totals\">\r\n                <h3>Cart Totals</h3>\r\n\r\n                <ul>\r\n                  <li>\r\n                    Subtotal <span>₱{formatNumber(total)}</span>\r\n                  </li>\r\n                  {/* <li>\r\n                    Shipping <span>₱150.00</span>\r\n                  </li> */}\r\n                  <li>\r\n                    Total{\" \"}\r\n                    <span>\r\n                      <b>₱{formatNumber(total)}</b>\r\n                    </span>\r\n                  </li>\r\n                </ul>\r\n\r\n                {total < 800 && (\r\n                  <p style={{ color: \"red\" }}>\r\n                    Minimum order is ₱800. If order is below ₱800, you will be\r\n                    charge to get to the 800 limit.\r\n                  </p>\r\n                )}\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-6\">\r\n                    <Link href=\"/\">\r\n                      <a style={{ marginBottom: \"0.5rem\" }}>\r\n                        <i\r\n                          className=\"fas fa-angle-double-left\"\r\n                          style={{ marginRight: \"5px\" }}\r\n                        ></i>\r\n                        Back to Shop\r\n                      </a>\r\n                    </Link>\r\n                  </div>\r\n\r\n                  <div className=\"col-md-6\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={proceedToCheckout}\r\n                      className=\"btn btn-light proceed-checkout\"\r\n                    >\r\n                      CONTINUE\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    products: state.addedItems,\r\n    total: state.total,\r\n    shipping: state.shipping,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    addShipping: () => {\r\n      dispatch({ type: \"ADD_SHIPPING\" });\r\n    },\r\n    substractShipping: () => {\r\n      dispatch({ type: \"SUB_SHIPPING\" });\r\n    },\r\n    addToCartAddons: (products, qty) => {\r\n      dispatch(addToCartAddons(products, qty));\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CartContent);\r\n"]},"metadata":{},"sourceType":"module"}