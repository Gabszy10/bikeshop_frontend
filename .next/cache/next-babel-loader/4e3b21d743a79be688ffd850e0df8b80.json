{"ast":null,"code":"// This function is called to create a Payment intent\n// Step 1 of https://developers.paymongo.com/docs/accepting-cards\nexport default async function handler(req, res) {\n  if (req.method === \"POST\") {\n    // Creating our options for the Create a Payment Intent Call\n    const optionsIntent = {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Basic ${Buffer.from(process.env.PAYMONGO_SECRET).toString(\"base64\")}` // HTTP Basic Auth and Encoding\n\n      },\n      body: JSON.stringify(req.body) // The req.body should follow this specific format\n      //   {\n      //     \"data\": {\n      //          \"attributes\": {\n      //               \"amount\": 10000 (int32) note that 10000 = PHP 100.00,\n      //               \"payment_method_allowed\": [\n      //                    \"card\",\n      //                    \"paymaya\"\n      //               ](string array),\n      //               \"payment_method_options\": {\n      //                    \"card\": {\n      //                         \"request_three_d_secure\": \"any\"\n      //                    }\n      //               },\n      //               \"currency\": \"PHP\" (string),\n      //               \"description\": \"description\" (string),\n      //               \"statement_descriptor\": \"descriptor business name\" (string)\n      //          }\n      //     }\n      //  }\n\n    }; // Calling the Create a Payment Intent API\n\n    await fetch(\"https://api.paymongo.com/v1/payment_intents\", optionsIntent).then(response => response.json()).then(async response => {\n      if (response.errors) {\n        console.log(JSON.stringify(response.errors));\n      } else {\n        res.status(200).json({\n          body: response\n        });\n      }\n    });\n  } else {}\n}","map":{"version":3,"sources":["C:/Users/corde/Desktop/New folder/bikeshop/bikeshop_frontend/pages/api/createPaymentIntent.js"],"names":["handler","req","res","method","optionsIntent","headers","Accept","Authorization","Buffer","from","process","env","PAYMONGO_SECRET","toString","body","JSON","stringify","fetch","then","response","json","errors","console","log","status"],"mappings":"AAAA;AACA;AAEA,eAAe,eAAeA,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC9C,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AAEzB;AACA,UAAMC,aAAa,GAAG;AACpBD,MAAAA,MAAM,EAAE,MADY;AAEpBE,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,kBADD;AAEP,wBAAgB,kBAFT;AAGPC,QAAAA,aAAa,EAAG,SAAQC,MAAM,CAACC,IAAP,CACtBC,OAAO,CAACC,GAAR,CAAYC,eADU,EAEtBC,QAFsB,CAEb,QAFa,CAEH,EALd,CAKiB;;AALjB,OAFW;AASpBC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAef,GAAG,CAACa,IAAnB,CATc,CAUpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AA7BoB,KAAtB,CAHyB,CAmCzB;;AACA,UAAMG,KAAK,CAAC,6CAAD,EAAgDb,aAAhD,CAAL,CACHc,IADG,CACGC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EADhB,EAEHF,IAFG,CAEE,MAAOC,QAAP,IAAoB;AACxB,UAAIA,QAAQ,CAACE,MAAb,EAAqB;AACnBC,QAAAA,OAAO,CAACC,GAAR,CAAYR,IAAI,CAACC,SAAL,CAAeG,QAAQ,CAACE,MAAxB,CAAZ;AACD,OAFD,MAEO;AACLnB,QAAAA,GAAG,CAACsB,MAAJ,CAAW,GAAX,EAAgBJ,IAAhB,CAAqB;AAAEN,UAAAA,IAAI,EAAEK;AAAR,SAArB;AACD;AACF,KARG,CAAN;AASD,GA7CD,MA6CO,CACN;AACF","sourcesContent":["// This function is called to create a Payment intent\r\n// Step 1 of https://developers.paymongo.com/docs/accepting-cards\r\n\r\nexport default async function handler(req, res) {\r\n  if (req.method === \"POST\") {\r\n\r\n    // Creating our options for the Create a Payment Intent Call\r\n    const optionsIntent = {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Basic ${Buffer.from(\r\n          process.env.PAYMONGO_SECRET\r\n        ).toString(\"base64\")}`, // HTTP Basic Auth and Encoding\r\n      },\r\n      body: JSON.stringify(req.body),\r\n      // The req.body should follow this specific format\r\n      //   {\r\n      //     \"data\": {\r\n      //          \"attributes\": {\r\n      //               \"amount\": 10000 (int32) note that 10000 = PHP 100.00,\r\n      //               \"payment_method_allowed\": [\r\n      //                    \"card\",\r\n      //                    \"paymaya\"\r\n      //               ](string array),\r\n      //               \"payment_method_options\": {\r\n      //                    \"card\": {\r\n      //                         \"request_three_d_secure\": \"any\"\r\n      //                    }\r\n      //               },\r\n      //               \"currency\": \"PHP\" (string),\r\n      //               \"description\": \"description\" (string),\r\n      //               \"statement_descriptor\": \"descriptor business name\" (string)\r\n      //          }\r\n      //     }\r\n      //  }\r\n    };\r\n\r\n    // Calling the Create a Payment Intent API\r\n    await fetch(\"https://api.paymongo.com/v1/payment_intents\", optionsIntent)\r\n      .then((response) => response.json())\r\n      .then(async (response) => {\r\n        if (response.errors) {\r\n          console.log(JSON.stringify(response.errors));\r\n        } else {\r\n          res.status(200).json({ body: response });\r\n        }\r\n      });\r\n  } else {\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}