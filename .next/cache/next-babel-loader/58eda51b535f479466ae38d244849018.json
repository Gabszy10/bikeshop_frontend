{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\corde\\\\Desktop\\\\New folder\\\\bikeshop\\\\gabszy-flower-frontend\\\\components\\\\payments\\\\Payment.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport axios from \"axios\";\nimport Router from \"next/router\";\nimport StripeCheckout from \"react-stripe-checkout\";\nimport { connect } from \"react-redux\";\nimport { ToastContainer, toast, Zoom } from \"react-toastify\";\nimport { resetCart as _resetCart } from \"../../store/actions/cartActions\";\n\nvar Payments = /*#__PURE__*/function (_React$Component) {\n  _inherits(Payments, _React$Component);\n\n  var _super = _createSuper(Payments);\n\n  function Payments() {\n    var _this;\n\n    _classCallCheck(this, Payments);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClick\", function () {\n      if (_this.props.isValid()) {\n        // this.props.resetCart();\n        // toast.success(\"Order has been confirmed\", {\n        //   position: \"top-center\",\n        //   autoClose: 3000,\n        //   hideProgressBar: false,\n        //   closeOnClick: true,\n        //   pauseOnHover: true,\n        //   draggable: true,\n        // });\n        // setTimeout(function () {\n        //   Router.push(\"/thankyou\");\n        // }, 3000);\n        _this.props.handleSubmit();\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(Payments, [{\n    key: \"render\",\n    value: function render() {\n      var amount = this.props.amount;\n\n      var onToken = /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(token) {\n          var body;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  body = {\n                    amount: amount,\n                    token: token\n                  };\n                  _context.next = 3;\n                  return axios.post(\"/api/stripe/checkout\", body);\n\n                case 3:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function onToken(_x) {\n          return _ref.apply(this, arguments);\n        };\n      }();\n\n      return __jsx(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 7\n        }\n      }, __jsx(ToastContainer, {\n        transition: Zoom,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 9\n        }\n      }), __jsx(\"div\", {\n        className: \"order-btn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 9\n        }\n      }, __jsx(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: this.handleClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }\n      }, \"Place Order\")));\n    }\n  }]);\n\n  return Payments;\n}(React.Component);\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    resetCart: function resetCart() {\n      dispatch(_resetCart());\n    }\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(Payments);","map":{"version":3,"sources":["C:/Users/corde/Desktop/New folder/bikeshop/gabszy-flower-frontend/components/payments/Payment.js"],"names":["React","axios","Router","StripeCheckout","connect","ToastContainer","toast","Zoom","resetCart","Payments","props","isValid","handleSubmit","amount","onToken","token","body","post","handleClick","Component","mapDispatchToProps","dispatch"],"mappings":";;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,cAAP,MAA2B,uBAA3B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,cAAT,EAAyBC,KAAzB,EAAgCC,IAAhC,QAA4C,gBAA5C;AACA,SAASC,SAAS,IAATA,UAAT,QAA0B,iCAA1B;;IAEMC,Q;;;;;;;;;;;;;;;;kEACU,YAAM;AAClB,UAAI,MAAKC,KAAL,CAAWC,OAAX,EAAJ,EAA0B;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA,cAAKD,KAAL,CAAWE,YAAX;AACD;AACF,K;;;;;;;6BACQ;AAAA,UACDC,MADC,GACU,KAAKH,KADf,CACDG,MADC;;AAEP,UAAMC,OAAO;AAAA,4EAAG,iBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACRC,kBAAAA,IADQ,GACD;AACXH,oBAAAA,MAAM,EAAEA,MADG;AAEXE,oBAAAA,KAAK,EAAEA;AAFI,mBADC;AAAA;AAAA,yBAKRd,KAAK,CAACgB,IAAN,CAAW,sBAAX,EAAmCD,IAAnC,CALQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAH;;AAAA,wBAAPF,OAAO;AAAA;AAAA;AAAA,SAAb;;AAQA,aACE,MAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,cAAD;AAAgB,QAAA,UAAU,EAAEP,IAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAGE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAkBE;AAAQ,QAAA,SAAS,EAAC,iBAAlB;AAAoC,QAAA,OAAO,EAAE,KAAKW,WAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAlBF,CAHF,CADF;AA4BD;;;;EA1DoBlB,KAAK,CAACmB,S;;AA6D7B,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,QAAD,EAAc;AACvC,SAAO;AACLb,IAAAA,SAAS,EAAE,qBAAM;AACfa,MAAAA,QAAQ,CAACb,UAAS,EAAV,CAAR;AACD;AAHI,GAAP;AAKD,CAND;;AAQA,eAAeJ,OAAO,CAAC,IAAD,EAAOgB,kBAAP,CAAP,CAAkCX,QAAlC,CAAf","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport Router from \"next/router\";\r\nimport StripeCheckout from \"react-stripe-checkout\";\r\nimport { connect } from \"react-redux\";\r\nimport { ToastContainer, toast, Zoom } from \"react-toastify\";\r\nimport { resetCart } from \"../../store/actions/cartActions\";\r\n\r\nclass Payments extends React.Component {\r\n  handleClick = () => {\r\n    if (this.props.isValid()) {\r\n      // this.props.resetCart();\r\n      // toast.success(\"Order has been confirmed\", {\r\n      //   position: \"top-center\",\r\n      //   autoClose: 3000,\r\n      //   hideProgressBar: false,\r\n      //   closeOnClick: true,\r\n      //   pauseOnHover: true,\r\n      //   draggable: true,\r\n      // });\r\n\r\n      // setTimeout(function () {\r\n      //   Router.push(\"/thankyou\");\r\n      // }, 3000);\r\n\r\n      this.props.handleSubmit();\r\n    }\r\n  };\r\n  render() {\r\n    let { amount } = this.props;\r\n    const onToken = async (token) => {\r\n      const body = {\r\n        amount: amount,\r\n        token: token,\r\n      };\r\n      await axios.post(\"/api/stripe/checkout\", body);\r\n    };\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <ToastContainer transition={Zoom} />\r\n\r\n        <div className=\"order-btn\">\r\n          {/* <StripeCheckout\r\n            name=\"We - Order\"\r\n            description=\"React Next eCommerce Templates\"\r\n            amount={amount}\r\n            currency=\"USD\"\r\n            token={onToken}\r\n            stripeKey=\"pk_test_ZaZZWZGlvdIn12yFleIqyjSI00G4e18Kf7\"\r\n            billingAddress={false}\r\n            closed={this.handleClick}\r\n          >\r\n            <button disabled={this.props.disabled} className={`btn btn-primary ${this.props.disabled ? 'btn-disabled' : ''}`} >\r\n                            Place Order\r\n                        </button>\r\n\r\n           \r\n          </StripeCheckout> */}\r\n\r\n          <button className=\"btn btn-primary\" onClick={this.handleClick}>\r\n            Place Order\r\n          </button>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    resetCart: () => {\r\n      dispatch(resetCart());\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(Payments);\r\n"]},"metadata":{},"sourceType":"module"}