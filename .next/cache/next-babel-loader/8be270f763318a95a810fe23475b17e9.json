{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { addToCart as _addToCart } from \"../../store/actions/cartActions\";\nimport Link from \"next/link\";\nimport ReactTooltip from \"react-tooltip\";\nimport { ToastContainer, toast, Slide } from \"react-toastify\";\nimport axios from \"axios\";\nimport { formatNumber } from \"../../helpers/function\";\nvar host = process.env.API_URL;\n\nfunction RelatedProducts(props) {\n  var _useState = useState([]),\n      products = _useState[0],\n      setproducts = _useState[1];\n\n  var fetchRelated = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(\"\".concat(host, \"/api/user/product/related/\").concat(props.categoryId));\n\n            case 3:\n              res = _context.sent;\n\n              if (res) {\n                setproducts(res.data.products);\n              }\n\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function fetchRelated() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    fetchRelated();\n  }, []);\n\n  var handleAddToCart = function handleAddToCart(product) {\n    console.log(product);\n    props.addToCart(product);\n    toast.success(\"Added to the cart\", {\n      position: \"bottom-left\",\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true\n    });\n  };\n\n  return __jsx(React.Fragment, null, __jsx(ReactTooltip, null), __jsx(ToastContainer, {\n    transition: Slide\n  }), __jsx(\"div\", {\n    className: \"related-products-area\"\n  }, __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"div\", {\n    className: \"section-title\"\n  }, __jsx(\"h2\", null, __jsx(\"span\", {\n    className: \"dot\"\n  }), \" Related Products\")), __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"row\"\n  }, console.log(products), products.map(function (data, idx) {\n    return __jsx(\"div\", {\n      className: \"col-lg-3 col-sm-6 col-6\",\n      key: idx\n    }, __jsx(\"div\", {\n      className: \"single-product-box\"\n    }, __jsx(\"div\", {\n      className: \"product-image\"\n    }, __jsx(Link, {\n      href: \"/product/\".concat(data.slug)\n    }, __jsx(\"img\", {\n      style: {\n        cursor: \"pointer\"\n      },\n      src: \"\".concat(host, \"/products/\").concat(data.product_images[0][\"file_name\"]),\n      alt: \"image\"\n    }))), __jsx(\"div\", {\n      className: \"product-content\"\n    }, __jsx(\"h3\", null, __jsx(Link, {\n      href: \"/product/\".concat(data.slug)\n    }, __jsx(\"a\", null, data.name))), __jsx(\"div\", {\n      className: \"product-price\"\n    }, __jsx(\"span\", {\n      className: \"new-price slashed\"\n    }, \"\\u20B1\", formatNumber(data.regular_price))), __jsx(\"div\", {\n      className: \"product-price\"\n    }, __jsx(\"span\", {\n      className: \"new-price\"\n    }, \"\\u20B1\", formatNumber(data.discount_price))), data.campaign_price ? __jsx(React.Fragment, null, __jsx(\"div\", {\n      className: \"product-price\"\n    }, __jsx(\"span\", {\n      className: \"new-price\",\n      style: {\n        fontSize: \"0.9rem\",\n        color: \"#ff5558\"\n      }\n    }, \"Valentine's Price:\")), __jsx(\"div\", {\n      className: \"product-price\"\n    }, __jsx(\"span\", {\n      className: \"new-price\",\n      style: {\n        fontSize: \"1rem\",\n        color: \"#ff5558\",\n        fontWeight: \"bold\"\n      }\n    }, \"\\u20B1\", formatNumber(data.campaign_price)))) : null, __jsx(\"div\", {\n      className: \"rating\"\n    }, __jsx(\"i\", {\n      className: \"fas fa-star\"\n    }), __jsx(\"i\", {\n      className: \"fas fa-star\"\n    }), __jsx(\"i\", {\n      className: \"fas fa-star\"\n    }), __jsx(\"i\", {\n      className: \"fas fa-star\"\n    }), __jsx(\"i\", {\n      className: \"fas fa-star\"\n    })), __jsx(Link, {\n      href: \"/product/\".concat(data.slug)\n    }, __jsx(\"a\", {\n      className: \"btn btn-light\",\n      onClick: function onClick(e) {// e.preventDefault();\n        // handleAddToCart(data);\n      }\n    }, \"Add to Cart\")))));\n  }))))));\n}\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {// products: state.products,\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    addToCart: function addToCart(id) {\n      dispatch(_addToCart(id));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RelatedProducts);","map":null,"metadata":{},"sourceType":"module"}