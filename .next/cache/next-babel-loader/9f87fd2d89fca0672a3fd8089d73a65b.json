{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from \"react\";\nimport cookie from \"js-cookie\";\nimport axios from \"axios\";\nimport { formatNumber } from \"../../helpers/function\";\nvar host = process.env.API_URL;\n\nfunction Profile() {\n  var _useState = useState([]),\n      history = _useState[0],\n      sethistory = _useState[1];\n\n  var _useState2 = useState(null),\n      orderDetails = _useState2[0],\n      setorderDetails = _useState2[1];\n\n  useEffect(function () {\n    var token = cookie.get(\"_wus_BJK\");\n\n    if (!token) {// window.location.href = \"/\";\n    } else {\n      fetchOrders(token);\n    }\n  }, []);\n\n  var fetchOrders = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(token) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(\"\".concat(host, \"/api/user/order/history\"), {\n                headers: {\n                  Authorization: \"\".concat(token)\n                }\n              });\n\n            case 3:\n              res = _context.sent;\n\n              if (res) {\n                sethistory(res.data.orders);\n              }\n\n              console.log(res);\n              _context.next = 12;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n\n              if (_context.t0.response.status == 401) {\n                cookie.remove(\"_wus_BJK\");\n                window.location.href = \"/\";\n              }\n\n              if (_context.t0.response.data.err == \"user order history not found\") {\n                sethistory([]);\n              }\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8]]);\n    }));\n\n    return function fetchOrders(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleDetails = function handleDetails() {};\n\n  return __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-md-4\"\n  }, __jsx(\"div\", {\n    className: \"card\",\n    style: {\n      marginLeft: \"1.7rem\"\n    }\n  }, __jsx(\"div\", {\n    className: \"card-body m-auto text-center\"\n  }, __jsx(\"img\", {\n    src: \"https://images.unsplash.com/photo-1526047932273-341f2a7631f9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60\",\n    alt: \"\",\n    height: \"100\",\n    style: {\n      borderRadius: \"50%\",\n      marginBottom: \"1rem\"\n    }\n  }), __jsx(\"h5\", {\n    className: \"card-title\"\n  }, \"I-Wheels\"), __jsx(\"button\", {\n    className: \"btn btn-link\"\n  }, \"Order History\"), __jsx(\"button\", {\n    className: \"btn btn-link\"\n  }, \"Update Profile\")))), history.length ? __jsx(\"div\", {\n    className: \"col-md-8\"\n  }, history.map(function (order, i) {\n    return __jsx(React.Fragment, null, __jsx(\"div\", {\n      key: i,\n      \"class\": \"card\"\n    }, __jsx(\"div\", {\n      className: \"card-header\"\n    }, __jsx(\"h5\", null, order.order_name), __jsx(\"p\", null, order.created_at)), __jsx(\"div\", {\n      className: \"card-body\"\n    }, __jsx(\"div\", {\n      className: \"row\"\n    }, __jsx(\"div\", {\n      className: \"col-md-4\"\n    }, __jsx(\"p\", {\n      className: \"card-text\"\n    }, \"Delivery Date: \", order.delivery_date), __jsx(\"p\", {\n      className: \"card-text\"\n    }, \"Delivery Time: \", order.delivery_time)), __jsx(\"div\", {\n      className: \"col-md-4\"\n    }, __jsx(\"p\", {\n      className: \"card-text\"\n    }, \"Mode Of Payment: \", order.payment_method), __jsx(\"p\", {\n      className: \"card-text\"\n    }, \"Status: \", order.order_status_id)), __jsx(\"div\", {\n      className: \"col-md-4\"\n    }, __jsx(\"p\", {\n      className: \"card-text\"\n    }, \"Amount: P\", formatNumber(order.total)), __jsx(\"button\", {\n      onClick: handleDetails,\n      \"data-toggle\": \"modal\",\n      \"data-target\": \"#exampleModal\",\n      className: \"btn btn-primary btn-details\",\n      style: {\n        marginTop: \"-0.5rem\",\n        fontSize: \"0.8rem\",\n        padding: \"0.7rem\"\n      }\n    }, \"View Details\"))))), __jsx(\"hr\", null));\n  })) : __jsx(\"h2\", {\n    className: \"text-center m-auto\"\n  }, \"Order history is empty.\"), __jsx(\"div\", {\n    className: \"modal fade\",\n    id: \"exampleModal\",\n    tabIndex: \"-1\",\n    role: \"dialog\",\n    \"aria-labelledby\": \"exampleModalLabel\",\n    \"aria-hidden\": \"true\"\n  }, __jsx(\"div\", {\n    className: \"modal-dialog\",\n    role: \"document\"\n  }, __jsx(\"div\", {\n    className: \"modal-content\"\n  }, __jsx(\"div\", {\n    className: \"modal-header\"\n  }, __jsx(\"h5\", {\n    className: \"modal-title\",\n    id: \"exampleModalLabel\"\n  }, \"Modal title\"), __jsx(\"button\", {\n    type: \"button\",\n    className: \"close\",\n    \"data-d\": \"modal\",\n    \"aria-label\": \"Close\"\n  }, __jsx(\"span\", {\n    \"aria-hidden\": \"true\"\n  }, \"\\xD7\"))), __jsx(\"div\", {\n    className: \"modal-body\"\n  }, \"...\"), __jsx(\"div\", {\n    className: \"modal-footer\"\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    \"data-dismiss\": \"modal\"\n  }, \"Close\"), __jsx(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\"\n  }, \"Save changes\"))))));\n}\n\nexport default Profile;","map":null,"metadata":{},"sourceType":"module"}