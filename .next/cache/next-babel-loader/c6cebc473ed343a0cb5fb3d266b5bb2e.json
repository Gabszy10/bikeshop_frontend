{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\corde\\\\Desktop\\\\New folder\\\\bikeshop\\\\bikeshop_frontend\\\\components\\\\auth\\\\Profile.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from \"react\";\nimport cookie from \"js-cookie\";\nimport axios from \"axios\";\nimport { formatNumber } from \"../../helpers/function\";\nimport { decryptInfoData, encryptInfoData } from \"../../store/actions/infoActions\";\nlet host = process.env.API_URL;\n\nfunction Profile() {\n  const {\n    0: history,\n    1: sethistory\n  } = useState([]);\n  const {\n    0: user,\n    1: setUser\n  } = useState(null);\n  const {\n    0: orderDetails,\n    1: setorderDetails\n  } = useState(null);\n  useEffect(() => {\n    let token = cookie.get(\"_wus_BJK\");\n\n    if (!token) {// window.location.href = \"/\";\n    } else {\n      fetchOrders(token);\n      fetchUserInfo(token);\n    }\n  }, []);\n\n  const fetchUserInfo = async token => {\n    try {\n      let res = await axios.get(`${host}/api/user/user/details`, {\n        headers: {\n          Authorization: `${token}`\n        }\n      });\n\n      if (res) {\n        setUser(res.data.userDetails);\n        let decryptedData = decryptInfoData();\n        console.log(decryptedData);\n\n        let newData = _objectSpread(_objectSpread({}, decryptedData), {}, {\n          shipping_firstName: {\n            value: \"\",\n            error: \"\"\n          },\n          shipping_lastName: {\n            value: \"\",\n            error: \"\"\n          },\n          shipping_address: {\n            value: \"\",\n            error: \"\"\n          },\n          shipping_city: {\n            value: \"\",\n            error: \"\"\n          },\n          shipping_zip: {\n            value: \"\",\n            error: \"\"\n          },\n          billing_email: {\n            value: res.data.userDetails.email || \"\",\n            error: \"\"\n          },\n          shipping_phone: {\n            value: \"\",\n            error: \"\"\n          },\n          billing_firstName: {\n            value: res.data.userDetails.first_name || \"\",\n            error: \"\"\n          },\n          billing_lastName: {\n            value: res.data.userDetails.last_name || \"\",\n            error: \"\"\n          },\n          billing_phone: {\n            value: \"\",\n            error: \"\"\n          },\n          note: {\n            value: \"\",\n            error: \"\"\n          },\n          message: {\n            value: \"\",\n            error: \"\"\n          },\n          delivery_date: {\n            value: \"\",\n            error: \"\"\n          },\n          delivery_time: {\n            value: \"\",\n            error: \"\"\n          }\n        });\n\n        console.log(newData);\n        encryptInfoData(newData);\n      }\n\n      console.log(res);\n    } catch (error) {\n      if (error.response.status == 401) {\n        cookie.remove(\"_wus_BJK\");\n        window.location.href = \"/\";\n      }\n    }\n  };\n\n  const fetchOrders = async token => {\n    try {\n      let res = await axios.get(`${host}/api/user/order/history`, {\n        headers: {\n          Authorization: `${token}`\n        }\n      });\n\n      if (res) {\n        sethistory(res.data.orders);\n      }\n\n      console.log(res);\n    } catch (error) {\n      if (error.response.status == 401) {\n        cookie.remove(\"_wus_BJK\");\n        window.location.href = \"/\";\n      }\n\n      if (error.response.data.err == \"user order history not found\") {\n        sethistory([]);\n      }\n    }\n  };\n\n  const handleDetails = () => {};\n\n  return __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"card\",\n    style: {\n      marginLeft: \"1.7rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"card-body m-auto text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, __jsx(\"img\", {\n    src: \"https://t3.ftcdn.net/jpg/03/39/45/96/360_F_339459697_XAFacNQmwnvJRqe1Fe9VOptPWMUxlZP8.jpg\",\n    alt: \"\",\n    height: \"100\",\n    style: {\n      borderRadius: \"50%\",\n      marginBottom: \"1rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }), __jsx(\"h5\", {\n    className: \"card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, user ? user.first_name : \"N/A\", \" \", user ? user.last_name : \"N/A\")))), history.length ? __jsx(\"div\", {\n    className: \"col-md-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, history.map((order, i) => {\n    return __jsx(React.Fragment, null, __jsx(\"div\", {\n      key: i,\n      class: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 19\n      }\n    }, __jsx(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 21\n      }\n    }, order.order_name), __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 21\n      }\n    }, order.created_at)), __jsx(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 19\n      }\n    }, __jsx(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 21\n      }\n    }, __jsx(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 23\n      }\n    }, __jsx(\"p\", {\n      className: \"card-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 25\n      }\n    }, \"Delivery Date: \", order.delivery_date, \"Delivery Date: \", order.delivery_date, \"Delivery Date: \", order.delivery_date), __jsx(\"p\", {\n      className: \"card-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 25\n      }\n    }, \"Delivery Time: \", order.delivery_time)), __jsx(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 23\n      }\n    }, __jsx(\"p\", {\n      className: \"card-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 25\n      }\n    }, \"Mode Of Payment: \", order.payment_method), __jsx(\"p\", {\n      className: \"card-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 25\n      }\n    }, \"Status: Pending\")), __jsx(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 23\n      }\n    }, __jsx(\"p\", {\n      className: \"card-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 25\n      }\n    }, \"Amount: P\", formatNumber(order.total)), __jsx(\"button\", {\n      onClick: handleDetails,\n      \"data-toggle\": \"modal\",\n      \"data-target\": \"#exampleModal\",\n      className: \"btn btn-primary btn-details\",\n      style: {\n        marginTop: \"-0.5rem\",\n        fontSize: \"0.8rem\",\n        padding: \"0.7rem\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 25\n      }\n    }, \"View Details\"))))), __jsx(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }\n    }));\n  })) : __jsx(\"h2\", {\n    className: \"text-center m-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 9\n    }\n  }, \"Order history is empty.\"), __jsx(\"div\", {\n    className: \"modal fade\",\n    id: \"exampleModal\",\n    tabIndex: \"-1\",\n    role: \"dialog\",\n    \"aria-labelledby\": \"exampleModalLabel\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"modal-dialog\",\n    role: \"document\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }\n  }, __jsx(\"h5\", {\n    className: \"modal-title\",\n    id: \"exampleModalLabel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 15\n    }\n  }, \"Modal title\"), __jsx(\"button\", {\n    type: \"button\",\n    className: \"close\",\n    \"data-d\": \"modal\",\n    \"aria-label\": \"Close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 15\n    }\n  }, __jsx(\"span\", {\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 17\n    }\n  }, \"\\xD7\"))), __jsx(\"div\", {\n    className: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }\n  }, \"...\"), __jsx(\"div\", {\n    className: \"modal-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    \"data-dismiss\": \"modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  }, \"Close\"), __jsx(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 15\n    }\n  }, \"Save changes\"))))));\n}\n\nexport default Profile;","map":{"version":3,"sources":["C:/Users/corde/Desktop/New folder/bikeshop/bikeshop_frontend/components/auth/Profile.js"],"names":["React","useEffect","useState","cookie","axios","formatNumber","decryptInfoData","encryptInfoData","host","process","env","API_URL","Profile","history","sethistory","user","setUser","orderDetails","setorderDetails","token","get","fetchOrders","fetchUserInfo","res","headers","Authorization","data","userDetails","decryptedData","console","log","newData","shipping_firstName","value","error","shipping_lastName","shipping_address","shipping_city","shipping_zip","billing_email","email","shipping_phone","billing_firstName","first_name","billing_lastName","last_name","billing_phone","note","message","delivery_date","delivery_time","response","status","remove","window","location","href","orders","err","handleDetails","marginLeft","borderRadius","marginBottom","length","map","order","i","order_name","created_at","payment_method","total","marginTop","fontSize","padding"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport cookie from \"js-cookie\";\r\nimport axios from \"axios\";\r\nimport { formatNumber } from \"../../helpers/function\";\r\nimport {\r\n  decryptInfoData,\r\n  encryptInfoData,\r\n} from \"../../store/actions/infoActions\";\r\n\r\nlet host = process.env.API_URL;\r\n\r\nfunction Profile() {\r\n  const [history, sethistory] = useState([]);\r\n  const [user, setUser] = useState(null);\r\n  const [orderDetails, setorderDetails] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let token = cookie.get(\"_wus_BJK\");\r\n    if (!token) {\r\n      // window.location.href = \"/\";\r\n    } else {\r\n      fetchOrders(token);\r\n      fetchUserInfo(token);\r\n    }\r\n  }, []);\r\n\r\n  const fetchUserInfo = async (token) => {\r\n    try {\r\n      let res = await axios.get(`${host}/api/user/user/details`, {\r\n        headers: {\r\n          Authorization: `${token}`,\r\n        },\r\n      });\r\n\r\n      if (res) {\r\n        setUser(res.data.userDetails);\r\n        let decryptedData = decryptInfoData();\r\n        console.log(decryptedData);\r\n        let newData = {\r\n          ...decryptedData,\r\n          shipping_firstName: { value: \"\", error: \"\" },\r\n          shipping_lastName: { value: \"\", error: \"\" },\r\n          shipping_address: { value: \"\", error: \"\" },\r\n          shipping_city: { value: \"\", error: \"\" },\r\n          shipping_zip: { value: \"\", error: \"\" },\r\n          billing_email: {\r\n            value: res.data.userDetails.email || \"\",\r\n            error: \"\",\r\n          },\r\n          shipping_phone: { value: \"\", error: \"\" },\r\n          billing_firstName: {\r\n            value: res.data.userDetails.first_name || \"\",\r\n            error: \"\",\r\n          },\r\n          billing_lastName: {\r\n            value: res.data.userDetails.last_name || \"\",\r\n            error: \"\",\r\n          },\r\n          billing_phone: { value: \"\", error: \"\" },\r\n          note: { value: \"\", error: \"\" },\r\n          message: { value: \"\", error: \"\" },\r\n          delivery_date: { value: \"\", error: \"\" },\r\n          delivery_time: { value: \"\", error: \"\" },\r\n        };\r\n\r\n        console.log(newData);\r\n        encryptInfoData(newData);\r\n      }\r\n      console.log(res);\r\n    } catch (error) {\r\n      if (error.response.status == 401) {\r\n        cookie.remove(\"_wus_BJK\");\r\n        window.location.href = \"/\";\r\n      }\r\n    }\r\n  };\r\n\r\n  const fetchOrders = async (token) => {\r\n    try {\r\n      let res = await axios.get(`${host}/api/user/order/history`, {\r\n        headers: {\r\n          Authorization: `${token}`,\r\n        },\r\n      });\r\n\r\n      if (res) {\r\n        sethistory(res.data.orders);\r\n      }\r\n      console.log(res);\r\n    } catch (error) {\r\n      if (error.response.status == 401) {\r\n        cookie.remove(\"_wus_BJK\");\r\n        window.location.href = \"/\";\r\n      }\r\n\r\n      if (error.response.data.err == \"user order history not found\") {\r\n        sethistory([]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDetails = () => {};\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-md-4\">\r\n        <div className=\"card\" style={{ marginLeft: \"1.7rem\" }}>\r\n          <div className=\"card-body m-auto text-center\">\r\n            <img\r\n              src=\"https://t3.ftcdn.net/jpg/03/39/45/96/360_F_339459697_XAFacNQmwnvJRqe1Fe9VOptPWMUxlZP8.jpg\"\r\n              alt=\"\"\r\n              height=\"100\"\r\n              style={{ borderRadius: \"50%\", marginBottom: \"1rem\" }}\r\n            />\r\n            <h5 className=\"card-title\">\r\n              {user ? user.first_name : \"N/A\"} {user ? user.last_name : \"N/A\"}\r\n            </h5>\r\n            {/* <button className=\"btn btn-link\">Order History</button> */}\r\n            {/* <button className=\"btn btn-link\">Update Profile</button> */}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {history.length ? (\r\n        <div className=\"col-md-8\">\r\n          {history.map((order, i) => {\r\n            return (\r\n              <>\r\n                <div key={i} class=\"card\">\r\n                  <div className=\"card-header\">\r\n                    <h5>{order.order_name}</h5>\r\n                    <p>{order.created_at}</p>\r\n                  </div>\r\n                  <div className=\"card-body\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-md-4\">\r\n                        <p className=\"card-text\">\r\n                          Delivery Date: {order.delivery_date}\r\n                          Delivery Date: {order.delivery_date}\r\n                          Delivery Date: {order.delivery_date}\r\n                        </p>\r\n                        <p className=\"card-text\">\r\n                          Delivery Time: {order.delivery_time}\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"col-md-4\">\r\n                        <p className=\"card-text\">\r\n                          Mode Of Payment: {order.payment_method}\r\n                        </p>\r\n                        <p className=\"card-text\">\r\n                          Status: Pending\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"col-md-4\">\r\n                        <p className=\"card-text\">\r\n                          Amount: P{formatNumber(order.total)}\r\n                        </p>\r\n                        <button\r\n                          onClick={handleDetails}\r\n                          data-toggle=\"modal\"\r\n                          data-target=\"#exampleModal\"\r\n                          className=\"btn btn-primary btn-details\"\r\n                          style={{\r\n                            marginTop: \"-0.5rem\",\r\n                            fontSize: \"0.8rem\",\r\n                            padding: \"0.7rem\",\r\n                          }}\r\n                        >\r\n                          View Details\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <hr />\r\n              </>\r\n            );\r\n          })}\r\n        </div>\r\n      ) : (\r\n        <h2 className=\"text-center m-auto\">Order history is empty.</h2>\r\n      )}\r\n\r\n      <div\r\n        className=\"modal fade\"\r\n        id=\"exampleModal\"\r\n        tabIndex=\"-1\"\r\n        role=\"dialog\"\r\n        aria-labelledby=\"exampleModalLabel\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <div className=\"modal-dialog\" role=\"document\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h5 className=\"modal-title\" id=\"exampleModalLabel\">\r\n                Modal title\r\n              </h5>\r\n              <button\r\n                type=\"button\"\r\n                className=\"close\"\r\n                data-d=\"modal\"\r\n                aria-label=\"Close\"\r\n              >\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">...</div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-secondary\"\r\n                data-dismiss=\"modal\"\r\n              >\r\n                Close\r\n              </button>\r\n              <button type=\"button\" className=\"btn btn-primary\">\r\n                Save changes\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n"]},"metadata":{},"sourceType":"module"}