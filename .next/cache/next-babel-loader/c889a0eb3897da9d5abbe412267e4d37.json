{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport LazyLoad from \"react-lazyload\";\nimport { connect } from \"react-redux\";\nimport { addToCart as _addToCart, addToCompare as _addToCompare } from \"../../store/actions/cartActions\";\nimport Link from \"next/link\";\nimport ReactTooltip from \"react-tooltip\";\nimport { ToastContainer, toast, Slide } from \"react-toastify\";\nimport QuickView from \"../Modal/QuickView\";\nimport axios from \"axios\";\nimport { formatNumber } from \"../../helpers/function\";\n\nfunction Products(props) {\n  var _useState = useState({\n    modalOpen: false,\n    modalImage: \"\",\n    price: 0,\n    idd: null\n  }),\n      state = _useState[0],\n      setstate = _useState[1];\n\n  var _useState2 = useState([]),\n      collections = _useState2[0],\n      setcollections = _useState2[1];\n\n  var host = process.env.API_URL;\n  var products = props.products;\n  var modalOpen = state.modalOpen;\n\n  var fetchCollection = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(\"\".concat(host, \"/api/user/collection\"));\n\n            case 3:\n              res = _context.sent;\n\n              if (res.data) {\n                setcollections(res.data.collections);\n              }\n\n              _context.next = 11;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n\n              if (!_context.t0.response.data) {\n                _context.next = 11;\n                break;\n              }\n\n              return _context.abrupt(\"return\", toast.error(_context.t0.response.data.msg));\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function fetchCollection() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    fetchCollection();\n  }, []);\n\n  var openTabSection = function openTabSection(evt, tabNmae) {\n    var i, tabcontent, tablinks;\n    tabcontent = document.getElementsByClassName(\"tabs_item\");\n\n    for (i = 0; i < tabcontent.length; i++) {\n      tabcontent[i].classList.remove(\"fadeInUp\");\n      tabcontent[i].style.display = \"none\";\n    }\n\n    tablinks = document.getElementsByTagName(\"li\");\n\n    for (i = 0; i < tablinks.length; i++) {\n      tablinks[i].className = tablinks[i].className.replace(\"current\", \"\");\n    }\n\n    document.getElementById(tabNmae).style.display = \"block\";\n    document.getElementById(tabNmae).className += \" fadeInUp animated\";\n    evt.currentTarget.className += \"current\";\n  };\n\n  var handleAddToCart = function handleAddToCart(product) {\n    props.addToCart(product);\n    toast.success(\"Added to the cart\", {\n      position: \"bottom-left\",\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true\n    });\n  };\n\n  var handleAddToCompare = function handleAddToCompare(id) {\n    props.addToCompare(id);\n    toast.success(\"Added to the compare\", {\n      position: \"bottom-left\",\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true\n    });\n  };\n\n  var compareButton = function compareButton(id) {\n    var compare_exist = props.CompareProducts.filter(function (item) {\n      return item.id === id;\n    });\n\n    if (compare_exist.length > 0) {\n      return __jsx(Link, {\n        href: \"#\"\n      }, __jsx(\"a\", {\n        \"data-tip\": \"Already Added\",\n        \"data-place\": \"left\",\n        onClick: function onClick(e) {\n          e.preventDefault();\n        },\n        disabled: true,\n        className: \"disabled\"\n      }, __jsx(\"i\", {\n        className: \"fas fa-sync\"\n      })));\n    } else {\n      return __jsx(Link, {\n        href: \"#\"\n      }, __jsx(\"a\", {\n        \"data-tip\": \"Add to Compare\",\n        \"data-place\": \"left\",\n        onClick: function onClick(e) {\n          e.preventDefault();\n          handleAddToCompare(id);\n        }\n      }, __jsx(\"i\", {\n        className: \"fas fa-sync\"\n      })));\n    }\n  };\n\n  var openModal = function openModal() {\n    setstate(_objectSpread(_objectSpread({}, state), {}, {\n      modalOpen: true\n    }));\n  };\n\n  var closeModal = function closeModal() {\n    setstate(_objectSpread(_objectSpread({}, state), {}, {\n      modalOpen: false\n    }));\n  };\n\n  var handleModalData = function handleModalData(image, price, id) {\n    setstate(_objectSpread(_objectSpread({}, state), {}, {\n      modalImage: image,\n      price: price,\n      idd: id\n    }));\n  };\n\n  return __jsx(\"section\", {\n    className: \"all-products-area pb-60\"\n  }, __jsx(ReactTooltip, null), __jsx(ToastContainer, {\n    transition: Slide\n  }), __jsx(\"div\", {\n    className: \"container\"\n  }, collections.length ? collections.map(function (collection, i) {\n    return __jsx(LazyLoad, {\n      height: 200,\n      offset: 100\n    }, __jsx(\"div\", {\n      key: i,\n      className: \"tab products-category-tab\"\n    }, __jsx(\"div\", {\n      className: \"row\"\n    }, __jsx(\"div\", {\n      className: \"col-lg-12 col-md-12\"\n    }, __jsx(\"ul\", {\n      className: \"tabs\"\n    }, __jsx(\"h2\", {\n      className: \"current\"\n    }, __jsx(\"span\", {\n      className: \"tabs-nav-text\"\n    }, __jsx(\"span\", {\n      className: \"dot\"\n    }), \" \", collection.title)))), __jsx(\"div\", {\n      className: \"col-lg-12 col-md-12\"\n    }, __jsx(\"div\", {\n      className: \"tab_content\"\n    }, __jsx(\"div\", {\n      id: \"tab1\",\n      className: \"tabs_item\"\n    }, __jsx(\"div\", {\n      className: \"row\"\n    }, collection.products.map(function (data, idx) {\n      return __jsx(\"div\", {\n        className: \"col-lg-3 col-sm-6 col-6\",\n        key: idx\n      }, __jsx(\"div\", {\n        className: \"single-product-box\"\n      }, __jsx(\"div\", {\n        className: \"product-image\"\n      }, __jsx(Link, {\n        href: \"/product/\".concat(data.slug)\n      }, __jsx(\"img\", {\n        style: {\n          cursor: \"pointer\"\n        },\n        src: \"\".concat(host, \"/products/\").concat(data.product_images[0][\"file_name\"]),\n        alt: \"image\"\n      })), __jsx(\"ul\", null, __jsx(\"li\", null, compareButton(data.id)))), __jsx(\"div\", {\n        className: \"product-content\"\n      }, __jsx(\"h3\", null, __jsx(Link, {\n        href: \"/product/\".concat(data.slug)\n      }, __jsx(\"a\", null, data.name))), __jsx(\"div\", {\n        className: \"product-price\"\n      }, __jsx(\"span\", {\n        className: \"new-price slashed\"\n      }, \"\\u20B1\", formatNumber(data.regular_price))), __jsx(\"div\", {\n        className: \"product-price\"\n      }, __jsx(\"span\", {\n        className: \"new-price\"\n      }, \"\\u20B1\", formatNumber(data.discount_price))), data.campaign_price ? __jsx(React.Fragment, null, __jsx(\"div\", {\n        className: \"product-price\"\n      }, __jsx(\"span\", {\n        className: \"new-price\",\n        style: {\n          fontSize: \"0.9rem\",\n          color: \"#ff5558\"\n        }\n      }, \"Valentine's Price:\")), __jsx(\"div\", {\n        className: \"product-price\"\n      }, __jsx(\"span\", {\n        className: \"new-price\",\n        style: {\n          fontSize: \"1rem\",\n          color: \"#ff5558\",\n          fontWeight: \"bold\"\n        }\n      }, \"\\u20B1\", formatNumber(data.campaign_price)))) : null, __jsx(\"div\", {\n        className: \"rating\"\n      }, __jsx(\"i\", {\n        className: \"fas fa-star\"\n      }), __jsx(\"i\", {\n        className: \"fas fa-star\"\n      }), __jsx(\"i\", {\n        className: \"fas fa-star\"\n      }), __jsx(\"i\", {\n        className: \"fas fa-star\"\n      }), __jsx(\"i\", {\n        className: \"fas fa-star\"\n      })), __jsx(Link, {\n        href: \"/product/\".concat(data.slug)\n      }, __jsx(\"a\", {\n        className: \"btn btn-light\",\n        onClick: function onClick(e) {// e.preventDefault();\n          // handleAddToCart(data);\n        }\n      }, \"Add to Cart\")))));\n    }))))))));\n  }) : null), modalOpen ? __jsx(QuickView, {\n    closeModal: closeModal,\n    idd: state.idd,\n    image: state.modalImage,\n    price: state.price\n  }) : \"\");\n}\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    products: state.products,\n    CompareProducts: state.addedItemsToCompare\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    addToCart: function addToCart(id) {\n      dispatch(_addToCart(id));\n    },\n    addToCompare: function addToCompare(id) {\n      dispatch(_addToCompare(id));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Products);","map":null,"metadata":{},"sourceType":"module"}