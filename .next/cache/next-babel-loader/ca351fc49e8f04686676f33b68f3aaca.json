{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { addToCart as _addToCart } from \"../../store/actions/cartActions\";\nimport Link from \"next/link\";\nimport ReactTooltip from \"react-tooltip\";\nimport { ToastContainer, toast, Slide } from \"react-toastify\";\nimport QuickView from \"../Modal/QuickView\";\nimport dynamic from \"next/dynamic\";\nimport axios from \"axios\";\nimport { formatNumber } from \"../../helpers/function\";\nvar OwlCarousel = dynamic(function () {\n  return import(\"react-owl-carousel3\");\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak(\"react-owl-carousel3\")];\n    },\n    modules: [\"react-owl-carousel3\"]\n  }\n});\nvar options = {\n  loop: false,\n  nav: true,\n  smartSpeed: 650,\n  dots: true,\n  autoplayHoverPause: true,\n  margin: 3,\n  autoplay: true,\n  navText: [\"<i class='fas fa-chevron-left'></i>\", \"<i class='fas fa-chevron-right'></i>\"],\n  responsive: {\n    0: {\n      items: 3\n    },\n    576: {\n      items: 4\n    },\n    768: {\n      items: 4\n    },\n    1024: {\n      items: 5\n    },\n    1200: {\n      items: 5\n    }\n  }\n};\n\nfunction ForceAddon(props) {\n  var _useState = useState([]),\n      products = _useState[0],\n      setproducts = _useState[1];\n\n  var _useState2 = useState({\n    modalOpen: false,\n    modalImage: \"\",\n    price: 0,\n    idd: null,\n    display: false,\n    panel: true\n  }),\n      state = _useState2[0],\n      setstate = _useState2[1]; //if inside means the addon is checked\n\n\n  var addonProductId = [];\n  var host = process.env.API_URL;\n\n  var fetchAddons = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(\"\".concat(host, \"/api/user/product/type/addon\"));\n\n            case 3:\n              res = _context.sent;\n\n              if (res.data) {\n                setproducts(res.data.products);\n              }\n\n              _context.next = 11;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n\n              if (!_context.t0.response.data) {\n                _context.next = 11;\n                break;\n              }\n\n              return _context.abrupt(\"return\", toast.error(_context.t0.response.data.msg));\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function fetchAddons() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    fetchAddons();\n  }, []);\n  useEffect(function () {\n    setstate(_objectSpread(_objectSpread({}, state), {}, {\n      display: true\n    }));\n  }, []);\n\n  var closeModal = function closeModal() {\n    setState({\n      modalOpen: false\n    });\n  };\n\n  var handleAddonCheck = function handleAddonCheck(e, product) {\n    if (!addonProductId.includes(product.id)) {\n      props.setAddon(function (addon) {\n        return [].concat(_toConsumableArray(addon), [product]);\n      });\n      addonProductId.push(product.id);\n    } else {\n      props.setAddon(function (addon) {\n        return addon.filter(function (i) {\n          return i.id !== product.id;\n        });\n      });\n      addonProductId = addonProductId.filter(function (i) {\n        return i !== product.id;\n      });\n    }\n  };\n\n  var modalOpen = state.modalOpen;\n  return __jsx(\"section\", {\n    className: \"best-sellers-area pt-40\"\n  }, __jsx(ReactTooltip, null), __jsx(ToastContainer, {\n    transition: Slide\n  }), __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"div\", {\n    className: \"tab products-category-tab-style-2 force-addon\"\n  }, __jsx(\"div\", {\n    className: \"title\"\n  }, __jsx(\"h2\", null, \"LAST CHANCE TO SELECT ADD ONS\")), __jsx(\"ul\", {\n    className: \"tabs\",\n    style: {\n      border: \"none\"\n    }\n  }), __jsx(\"div\", {\n    className: \"tab_content\"\n  }, __jsx(\"div\", {\n    id: \"tab4\",\n    className: \"tabs_item_best addon\"\n  }, state.display ? __jsx(OwlCarousel, _extends({\n    className: \"product-slides owl-carousel owl-theme\"\n  }, options), products.map(function (data, idx) {\n    return __jsx(\"div\", {\n      key: idx\n    }, __jsx(\"div\", {\n      className: \"single-product-item\"\n    }, __jsx(\"div\", {\n      className: \"product-image\"\n    }, __jsx(\"img\", {\n      src: \"\".concat(host, \"/products/\").concat(data.product_images[0][\"file_name\"])\n    })), __jsx(\"div\", {\n      className: \"product-content\"\n    }, __jsx(\"h3\", null, __jsx(Link, {\n      href: \"/product/product-details\"\n    }, __jsx(\"a\", {\n      className: \"product-name text-center\"\n    }, data.name))), __jsx(\"div\", {\n      className: \"product-price text-center\"\n    }, __jsx(\"span\", {\n      className: \"new-price m-auto\",\n      style: {\n        fontSize: \"14px\"\n      }\n    }, \"\\u20B1\", formatNumber(data.discount_price))), __jsx(\"div\", {\n      className: \"row align-items-end\"\n    }, __jsx(\"div\", {\n      className: \"m-auto\"\n    }, __jsx(\"input\", {\n      type: \"checkbox\",\n      onClick: function onClick(e) {\n        handleAddonCheck(e, data);\n      }\n    }))))));\n  })) : \"\")))), modalOpen ? __jsx(QuickView, {\n    closeModal: closeModal,\n    idd: state.idd,\n    image: state.modalImage,\n    price: state.price\n  }) : \"\");\n}\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    products: state.productsCollectionNine\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    addToCart: function addToCart(id) {\n      dispatch(_addToCart(id));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ForceAddon);","map":null,"metadata":{},"sourceType":"module"}