{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\corde\\\\Desktop\\\\New folder\\\\bikeshop\\\\bikeshop_frontend\\\\components\\\\payments\\\\CreditCard.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\n\nvar CreditCard = function CreditCard(_ref) {\n  _s();\n\n  var amount = _ref.amount,\n      description = _ref.description;\n\n  var _useState = useState(\"\"),\n      name = _useState[0],\n      setName = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      phone = _useState2[0],\n      setPhone = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      email = _useState3[0],\n      setEmail = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      cardHolder = _useState4[0],\n      setCardHolder = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      number = _useState5[0],\n      setNumber = _useState5[1];\n\n  var _useState6 = useState(\"\"),\n      month = _useState6[0],\n      setMonth = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      year = _useState7[0],\n      setYear = _useState7[1];\n\n  var _useState8 = useState(\"\"),\n      code = _useState8[0],\n      setCode = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      paymentStatus = _useState9[0],\n      setPaymentStatus = _useState9[1]; // Function to Listen to the Payment in the Front End\n\n\n  var listenToPayment = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(fullClient) {\n      var paymentIntentId, i, _i, paymentIntentData;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              paymentIntentId = fullClient.split(\"_client\")[0];\n              i = 5;\n              _i = 5;\n\n            case 3:\n              if (!(_i > 0)) {\n                _context.next = 15;\n                break;\n              }\n\n              setPaymentStatus(\"Listening to Payment in \".concat(_i));\n              _context.next = 7;\n              return new Promise(function (resolve) {\n                return setTimeout(resolve, 1000);\n              });\n\n            case 7:\n              if (!(_i == 1)) {\n                _context.next = 12;\n                break;\n              }\n\n              _context.next = 10;\n              return fetch(\"https://api.paymongo.com/v1/payment_intents/\" + paymentIntentId + \"?client_key=\" + fullClient, {\n                headers: {\n                  // Base64 encoded public PayMongo API key.\n                  Authorization: \"Basic \".concat(Buffer.from(process.env.NEXT_PUBLIC_PAYMONGO_PUBLIC).toString(\"base64\"))\n                }\n              }).then(function (response) {\n                return response.json();\n              }).then(function (response) {\n                console.log(response.data);\n                return response.data;\n              });\n\n            case 10:\n              paymentIntentData = _context.sent;\n\n              if (paymentIntentData.attributes.last_payment_error) {\n                setPaymentStatus(JSON.stringify(paymentIntentData.attributes.last_payment_error));\n              } else if (paymentIntentData.attributes.status === \"succeeded\") {\n                setPaymentStatus(\"Payment Success\");\n              } else {\n                _i = 5;\n              }\n\n            case 12:\n              _i--;\n              _context.next = 3;\n              break;\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function listenToPayment(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // Function to Create a Payment Intent by calling the site's api\n\n\n  var createPaymentIntent = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var paymentIntent;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setPaymentStatus(\"Creating Payment Intent\");\n              _context2.next = 3;\n              return fetch(\"/api/createPaymentIntent\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  data: {\n                    attributes: {\n                      amount: amount * 100,\n                      payment_method_allowed: [\"card\"],\n                      payment_method_options: {\n                        card: {\n                          request_three_d_secure: \"any\"\n                        }\n                      },\n                      currency: \"PHP\",\n                      description: description,\n                      statement_descriptor: \"descriptor business name\"\n                    }\n                  }\n                })\n              }).then(function (response) {\n                return response.json();\n              }).then(function (response) {\n                return response.body.data;\n              });\n\n            case 3:\n              paymentIntent = _context2.sent;\n              return _context2.abrupt(\"return\", paymentIntent);\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function createPaymentIntent() {\n      return _ref3.apply(this, arguments);\n    };\n  }(); // Function to Create a Payment Method by calling the PayMongo API\n\n\n  var createPaymentMethod = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var paymentMethod;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setPaymentStatus(\"Creating Payment Method\");\n              paymentMethod = fetch(\"https://api.paymongo.com/v1/payment_methods\", {\n                method: \"POST\",\n                headers: {\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Basic \".concat(Buffer.from(process.env.NEXT_PUBLIC_PAYMONGO_PUBLIC).toString(\"base64\"))\n                },\n                body: JSON.stringify({\n                  data: {\n                    attributes: {\n                      details: {\n                        card_number: \"\".concat(number),\n                        //\"4343434343434345\",\n                        exp_month: parseInt(\"\".concat(month)),\n                        //2\n                        exp_year: parseInt(\"\".concat(year)),\n                        //22\n                        cvc: \"\".concat(code) //\"123\",\n\n                      },\n                      billing: {\n                        name: \"\".concat(name),\n                        email: \"\".concat(email),\n                        phone: \"\".concat(phone)\n                      },\n                      type: \"card\"\n                    }\n                  }\n                })\n              }).then(function (response) {\n                return response.json();\n              }).then(function (response) {\n                return response.data;\n              })[\"catch\"](function (err) {\n                console.log(err);\n                setPaymentStatus(err);\n                return err;\n              });\n              return _context3.abrupt(\"return\", paymentMethod);\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function createPaymentMethod() {\n      return _ref4.apply(this, arguments);\n    };\n  }(); // Function to Attach a Payment Method to the Intent by calling the PayMongo API\n\n\n  var attachIntentMethod = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(intent, method) {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              setPaymentStatus(\"Attaching Intent to Method\");\n              fetch(\"https://api.paymongo.com/v1/payment_intents/\".concat(intent.id, \"/attach\"), {\n                method: \"POST\",\n                headers: {\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Basic \".concat(Buffer.from(process.env.NEXT_PUBLIC_PAYMONGO_PUBLIC).toString(\"base64\"))\n                },\n                body: JSON.stringify({\n                  data: {\n                    attributes: {\n                      payment_method: \"\".concat(method.id),\n                      client_key: \"\".concat(intent.attributes.client_key)\n                    }\n                  }\n                })\n              }).then(function (response) {\n                return response.json();\n              }).then(function (response) {\n                var paymentIntent = response.data;\n                console.log(paymentIntent);\n                var paymentIntentStatus = paymentIntent.attributes.status;\n\n                if (paymentIntentStatus === \"awaiting_next_action\") {\n                  // Render your modal for 3D Secure Authentication since next_action has a value. You can access the next action via paymentIntent.attributes.next_action.\n                  setPaymentStatus(paymentIntentStatus);\n                  window.open(paymentIntent.attributes.next_action.redirect.url, \"_blank\");\n                  listenToPayment(paymentIntent.attributes.client_key);\n                } else {\n                  setPaymentStatus(paymentIntentStatus);\n                }\n              })[\"catch\"](function (err) {\n                console.log(err);\n                setPaymentStatus(JSON.stringify(err));\n              });\n\n            case 2:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function attachIntentMethod(_x2, _x3) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(event) {\n      var paymentIntent, paymentMethod;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              event.preventDefault();\n              _context5.next = 3;\n              return createPaymentIntent();\n\n            case 3:\n              paymentIntent = _context5.sent;\n              _context5.next = 6;\n              return createPaymentMethod();\n\n            case 6:\n              paymentMethod = _context5.sent;\n              _context5.next = 9;\n              return attachIntentMethod(paymentIntent, paymentMethod);\n\n            case 9:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function onSubmit(_x4) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"section\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 5\n    }\n  }, __jsx(\"form\", {\n    action: \"#\",\n    onSubmit: onSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }\n  }, __jsx(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 9\n    }\n  }, \"Billing Information\"), __jsx(\"div\", {\n    id: \"form-card\",\n    className: \"formField\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"customer-name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 11\n    }\n  }, \"Customer Name:\"), __jsx(\"input\", {\n    id: \"customer-name\",\n    placeholder: \"Juan Dela Cruz\",\n    name: \"name\",\n    className: \"input\",\n    value: name,\n    onChange: function onChange(e) {\n      return setName(e.target.value);\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    id: \"form-card\",\n    className: \"formField\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 9\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"phone\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 11\n    }\n  }, \"Phone Number:\"), __jsx(\"input\", {\n    id: \"phone\",\n    placeholder: \"09xxxxxxxxx\",\n    name: \"phone\",\n    className: \"input\",\n    value: phone,\n    onChange: function onChange(e) {\n      return setPhone(e.target.value);\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    id: \"form-card\",\n    className: \"formField\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 9\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"email\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 11\n    }\n  }, \"email:\"), __jsx(\"input\", {\n    id: \"email\",\n    name: \"email\",\n    placeholder: \"user@domain.com\",\n    className: \"input\",\n    value: email,\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 11\n    }\n  })), __jsx(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }\n  }, \"Payment Details\"), __jsx(\"div\", {\n    id: \"form-card\",\n    className: \"formField\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 9\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"cc-name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 11\n    }\n  }, \"Card Holder:\"), __jsx(\"input\", {\n    id: \"cc-name\",\n    name: \"cc-name\",\n    placeholder: \"Juan Dela Cruz\",\n    className: \"input\",\n    value: cardHolder,\n    onChange: function onChange(e) {\n      return setCardHolder(e.target.value);\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    id: \"form-card\",\n    className: \"formField\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 9\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"cc-number\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 11\n    }\n  }, \"Card number:\"), __jsx(\"input\", {\n    id: \"cc-number\",\n    name: \"cc-number\",\n    maxLength: \"19\",\n    placeholder: \"1111 2222 3333 4444\",\n    className: \"input\",\n    value: number,\n    onChange: function onChange(e) {\n      return setNumber(e.target.value);\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    id: \"form-date\",\n    className: \"formField\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 9\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"expiry-month\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 11\n    }\n  }, \"Expiry date:\"), __jsx(\"div\", {\n    className: \"dateVal\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 11\n    }\n  }, __jsx(\"select\", {\n    id: \"expiry-month\",\n    name: \"expiry-month\",\n    className: \"select\",\n    value: month,\n    onChange: function onChange(e) {\n      return setMonth(e.target.value);\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 13\n    }\n  }, __jsx(\"option\", {\n    id: \"trans-label_month\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 15\n    }\n  }, \"Month\"), __jsx(\"option\", {\n    value: \"1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 15\n    }\n  }, \"01\"), __jsx(\"option\", {\n    value: \"2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 15\n    }\n  }, \"02\"), __jsx(\"option\", {\n    value: \"3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 15\n    }\n  }, \"03\"), __jsx(\"option\", {\n    value: \"4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 15\n    }\n  }, \"04\"), __jsx(\"option\", {\n    value: \"5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 15\n    }\n  }, \"05\"), __jsx(\"option\", {\n    value: \"6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 15\n    }\n  }, \"06\"), __jsx(\"option\", {\n    value: \"7\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 15\n    }\n  }, \"07\"), __jsx(\"option\", {\n    value: \"8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 15\n    }\n  }, \"08\"), __jsx(\"option\", {\n    value: \"9\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 15\n    }\n  }, \"09\"), __jsx(\"option\", {\n    value: \"10\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 15\n    }\n  }, \"10\"), __jsx(\"option\", {\n    value: \"11\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 15\n    }\n  }, \"11\"), __jsx(\"option\", {\n    value: \"12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 15\n    }\n  }, \"12\")), __jsx(\"select\", {\n    id: \"expiry-year\",\n    name: \"expiry-year\",\n    className: \"select\",\n    value: year,\n    onChange: function onChange(e) {\n      return setYear(e.target.value);\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 13\n    }\n  }, __jsx(\"option\", {\n    id: \"trans-label_year\",\n    value: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 15\n    }\n  }, \"Year\"), __jsx(\"option\", {\n    value: \"2021\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 15\n    }\n  }, \"21\"), __jsx(\"option\", {\n    value: \"2022\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 15\n    }\n  }, \"22\"), __jsx(\"option\", {\n    value: \"2023\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 15\n    }\n  }, \"23\"), __jsx(\"option\", {\n    value: \"2024\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 15\n    }\n  }, \"24\"), __jsx(\"option\", {\n    value: \"2025\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 15\n    }\n  }, \"25\"), __jsx(\"option\", {\n    value: \"2026\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 15\n    }\n  }, \"26\"), __jsx(\"option\", {\n    value: \"2027\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 15\n    }\n  }, \"27\"), __jsx(\"option\", {\n    value: \"2028\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 15\n    }\n  }, \"28\"), __jsx(\"option\", {\n    value: \"2029\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 15\n    }\n  }, \"29\"), __jsx(\"option\", {\n    value: \"2030\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 15\n    }\n  }, \"30\"), __jsx(\"option\", {\n    value: \"2031\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 15\n    }\n  }, \"31\"), __jsx(\"option\", {\n    value: \"2032\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 15\n    }\n  }, \"32\"), __jsx(\"option\", {\n    value: \"2033\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 15\n    }\n  }, \"33\"), __jsx(\"option\", {\n    value: \"2034\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 15\n    }\n  }, \"34\"), __jsx(\"option\", {\n    value: \"2035\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 15\n    }\n  }, \"35\"), __jsx(\"option\", {\n    value: \"2036\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 15\n    }\n  }, \"36\"), __jsx(\"option\", {\n    value: \"2037\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 15\n    }\n  }, \"37\"), __jsx(\"option\", {\n    value: \"2038\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 15\n    }\n  }, \"38\"), __jsx(\"option\", {\n    value: \"2039\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 15\n    }\n  }, \"39\"), __jsx(\"option\", {\n    value: \"2040\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 15\n    }\n  }, \"40\"), __jsx(\"option\", {\n    value: \"2041\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 15\n    }\n  }, \"41\"), __jsx(\"option\", {\n    value: \"2042\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 15\n    }\n  }, \"42\"), __jsx(\"option\", {\n    value: \"2043\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 15\n    }\n  }, \"43\"), __jsx(\"option\", {\n    value: \"2044\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 15\n    }\n  }, \"44\"), __jsx(\"option\", {\n    value: \"2045\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 15\n    }\n  }, \"45\"), __jsx(\"option\", {\n    value: \"2046\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 15\n    }\n  }, \"46\"), __jsx(\"option\", {\n    value: \"2047\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 15\n    }\n  }, \"47\")))), __jsx(\"div\", {\n    id: \"form-sec-code\",\n    className: \"formField\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 9\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"sec-code\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 11\n    }\n  }, \"Security code:\"), __jsx(\"input\", {\n    name: \"sec-code\",\n    type: \"password\",\n    maxLength: \"3\",\n    placeholder: \"123\",\n    className: \"input\",\n    value: code,\n    onChange: function onChange(e) {\n      return setCode(e.target.value);\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 11\n    }\n  })), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"payButton\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 9\n    }\n  }, \"Pay\"), __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 9\n    }\n  }, paymentStatus)));\n};\n\n_s(CreditCard, \"OFFPdjFdDvuOnPehJMvb/5CLa1k=\");\n\n_c = CreditCard;\nexport default CreditCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreditCard\");","map":{"version":3,"sources":["C:/Users/corde/Desktop/New folder/bikeshop/bikeshop_frontend/components/payments/CreditCard.js"],"names":["React","useState","CreditCard","amount","description","name","setName","phone","setPhone","email","setEmail","cardHolder","setCardHolder","number","setNumber","month","setMonth","year","setYear","code","setCode","paymentStatus","setPaymentStatus","listenToPayment","fullClient","paymentIntentId","split","i","Promise","resolve","setTimeout","fetch","headers","Authorization","Buffer","from","process","env","NEXT_PUBLIC_PAYMONGO_PUBLIC","toString","then","response","json","console","log","data","paymentIntentData","attributes","last_payment_error","JSON","stringify","status","createPaymentIntent","method","body","payment_method_allowed","payment_method_options","card","request_three_d_secure","currency","statement_descriptor","paymentIntent","createPaymentMethod","paymentMethod","Accept","details","card_number","exp_month","parseInt","exp_year","cvc","billing","type","err","attachIntentMethod","intent","id","payment_method","client_key","paymentIntentStatus","window","open","next_action","redirect","url","onSubmit","event","preventDefault","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\n\r\nconst CreditCard = ({ amount, description }) => {\r\n  const [name, setName] = useState(\"\");\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n\r\n  const [cardHolder, setCardHolder] = useState(\"\");\r\n  const [number, setNumber] = useState(\"\");\r\n  const [month, setMonth] = useState(\"\");\r\n  const [year, setYear] = useState(\"\");\r\n  const [code, setCode] = useState(\"\");\r\n\r\n  const [paymentStatus, setPaymentStatus] = useState(\"\");\r\n\r\n  // Function to Listen to the Payment in the Front End\r\n  const listenToPayment = async (fullClient) => {\r\n    const paymentIntentId = fullClient.split(\"_client\")[0];\r\n    let i = 5;\r\n    for (let i = 5; i > 0; i--) {\r\n      setPaymentStatus(`Listening to Payment in ${i}`);\r\n      await new Promise((resolve) => setTimeout(resolve, 1000));\r\n\r\n      if (i == 1) {\r\n        const paymentIntentData = await fetch(\r\n          \"https://api.paymongo.com/v1/payment_intents/\" +\r\n            paymentIntentId +\r\n            \"?client_key=\" +\r\n            fullClient,\r\n          {\r\n            headers: {\r\n              // Base64 encoded public PayMongo API key.\r\n              Authorization: `Basic ${Buffer.from(\r\n                process.env.NEXT_PUBLIC_PAYMONGO_PUBLIC\r\n              ).toString(\"base64\")}`,\r\n            },\r\n          }\r\n        )\r\n          .then((response) => {\r\n            return response.json();\r\n          })\r\n          .then((response) => {\r\n            console.log(response.data);\r\n            return response.data;\r\n          });\r\n\r\n        if (paymentIntentData.attributes.last_payment_error) {\r\n          setPaymentStatus(\r\n            JSON.stringify(paymentIntentData.attributes.last_payment_error)\r\n          );\r\n        } else if (paymentIntentData.attributes.status === \"succeeded\") {\r\n          setPaymentStatus(\"Payment Success\");\r\n        } else {\r\n          i = 5;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // Function to Create a Payment Intent by calling the site's api\r\n  const createPaymentIntent = async () => {\r\n    setPaymentStatus(\"Creating Payment Intent\");\r\n    const paymentIntent = await fetch(\"/api/createPaymentIntent\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        data: {\r\n          attributes: {\r\n            amount: amount * 100,\r\n            payment_method_allowed: [\"card\"],\r\n            payment_method_options: {\r\n              card: { request_three_d_secure: \"any\" },\r\n            },\r\n            currency: \"PHP\",\r\n            description: description,\r\n            statement_descriptor: \"descriptor business name\",\r\n          },\r\n        },\r\n      }),\r\n    })\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((response) => {\r\n        return response.body.data;\r\n      });\r\n\r\n    return paymentIntent;\r\n  };\r\n\r\n  // Function to Create a Payment Method by calling the PayMongo API\r\n  const createPaymentMethod = async () => {\r\n    setPaymentStatus(\"Creating Payment Method\");\r\n    const paymentMethod = fetch(\"https://api.paymongo.com/v1/payment_methods\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Basic ${Buffer.from(\r\n          process.env.NEXT_PUBLIC_PAYMONGO_PUBLIC\r\n        ).toString(\"base64\")}`,\r\n      },\r\n      body: JSON.stringify({\r\n        data: {\r\n          attributes: {\r\n            details: {\r\n              card_number: `${number}`, //\"4343434343434345\",\r\n              exp_month: parseInt(`${month}`), //2\r\n              exp_year: parseInt(`${year}`), //22\r\n              cvc: `${code}`, //\"123\",\r\n            },\r\n            billing: {\r\n              name: `${name}`,\r\n              email: `${email}`,\r\n              phone: `${phone}`,\r\n            },\r\n            type: \"card\",\r\n          },\r\n        },\r\n      }),\r\n    })\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((response) => {\r\n        return response.data;\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setPaymentStatus(err);\r\n        return err;\r\n      });\r\n\r\n    return paymentMethod;\r\n  };\r\n\r\n  // Function to Attach a Payment Method to the Intent by calling the PayMongo API\r\n  const attachIntentMethod = async (intent, method) => {\r\n    setPaymentStatus(\"Attaching Intent to Method\");\r\n    fetch(`https://api.paymongo.com/v1/payment_intents/${intent.id}/attach`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Basic ${Buffer.from(\r\n          process.env.NEXT_PUBLIC_PAYMONGO_PUBLIC\r\n        ).toString(\"base64\")}`,\r\n      },\r\n      body: JSON.stringify({\r\n        data: {\r\n          attributes: {\r\n            payment_method: `${method.id}`,\r\n            client_key: `${intent.attributes.client_key}`,\r\n          },\r\n        },\r\n      }),\r\n    })\r\n      .then((response) => response.json())\r\n      .then((response) => {\r\n        const paymentIntent = response.data;\r\n        console.log(paymentIntent);\r\n        const paymentIntentStatus = paymentIntent.attributes.status;\r\n        if (paymentIntentStatus === \"awaiting_next_action\") {\r\n          // Render your modal for 3D Secure Authentication since next_action has a value. You can access the next action via paymentIntent.attributes.next_action.\r\n          setPaymentStatus(paymentIntentStatus);\r\n          window.open(\r\n            paymentIntent.attributes.next_action.redirect.url,\r\n            \"_blank\"\r\n          );\r\n          listenToPayment(paymentIntent.attributes.client_key);\r\n        } else {\r\n          setPaymentStatus(paymentIntentStatus);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setPaymentStatus(JSON.stringify(err));\r\n      });\r\n  };\r\n\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const paymentIntent = await createPaymentIntent();\r\n    const paymentMethod = await createPaymentMethod();\r\n    await attachIntentMethod(paymentIntent, paymentMethod);\r\n  };\r\n\r\n  return (\r\n    <section>\r\n      <form action=\"#\" onSubmit={onSubmit}>\r\n        <h2>Billing Information</h2>\r\n        <div id=\"form-card\" className=\"formField\">\r\n          <label htmlFor=\"customer-name\">Customer Name:</label>\r\n          <input\r\n            id=\"customer-name\"\r\n            placeholder=\"Juan Dela Cruz\"\r\n            name=\"name\"\r\n            className={\"input\"}\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <div id=\"form-card\" className={\"formField\"}>\r\n          <label htmlFor=\"phone\">Phone Number:</label>\r\n          <input\r\n            id=\"phone\"\r\n            placeholder=\"09xxxxxxxxx\"\r\n            name=\"phone\"\r\n            className={\"input\"}\r\n            value={phone}\r\n            onChange={(e) => setPhone(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <div id=\"form-card\" className={\"formField\"}>\r\n          <label htmlFor=\"email\">email:</label>\r\n          <input\r\n            id=\"email\"\r\n            name=\"email\"\r\n            placeholder=\"user@domain.com\"\r\n            className={\"input\"}\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <h2>Payment Details</h2>\r\n        <div id=\"form-card\" className={\"formField\"}>\r\n          <label htmlFor=\"cc-name\">Card Holder:</label>\r\n          <input\r\n            id=\"cc-name\"\r\n            name=\"cc-name\"\r\n            placeholder=\"Juan Dela Cruz\"\r\n            className={\"input\"}\r\n            value={cardHolder}\r\n            onChange={(e) => setCardHolder(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <div id=\"form-card\" className={\"formField\"}>\r\n          <label htmlFor=\"cc-number\">Card number:</label>\r\n          <input\r\n            id=\"cc-number\"\r\n            name=\"cc-number\"\r\n            maxLength=\"19\"\r\n            placeholder=\"1111 2222 3333 4444\"\r\n            className={\"input\"}\r\n            value={number}\r\n            onChange={(e) => setNumber(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div id=\"form-date\" className={\"formField\"}>\r\n          <label htmlFor=\"expiry-month\">Expiry date:</label>\r\n          <div className={\"dateVal\"}>\r\n            <select\r\n              id=\"expiry-month\"\r\n              name=\"expiry-month\"\r\n              className={\"select\"}\r\n              value={month}\r\n              onChange={(e) => setMonth(e.target.value)}\r\n              required\r\n            >\r\n              <option id=\"trans-label_month\">Month</option>\r\n              <option value=\"1\">01</option>\r\n              <option value=\"2\">02</option>\r\n              <option value=\"3\">03</option>\r\n              <option value=\"4\">04</option>\r\n              <option value=\"5\">05</option>\r\n              <option value=\"6\">06</option>\r\n              <option value=\"7\">07</option>\r\n              <option value=\"8\">08</option>\r\n              <option value=\"9\">09</option>\r\n              <option value=\"10\">10</option>\r\n              <option value=\"11\">11</option>\r\n              <option value=\"12\">12</option>\r\n            </select>\r\n            <select\r\n              id=\"expiry-year\"\r\n              name=\"expiry-year\"\r\n              className={\"select\"}\r\n              value={year}\r\n              onChange={(e) => setYear(e.target.value)}\r\n              required\r\n            >\r\n              <option id=\"trans-label_year\" value=\"\">\r\n                Year\r\n              </option>\r\n              <option value=\"2021\">21</option>\r\n              <option value=\"2022\">22</option>\r\n              <option value=\"2023\">23</option>\r\n              <option value=\"2024\">24</option>\r\n              <option value=\"2025\">25</option>\r\n              <option value=\"2026\">26</option>\r\n              <option value=\"2027\">27</option>\r\n              <option value=\"2028\">28</option>\r\n              <option value=\"2029\">29</option>\r\n              <option value=\"2030\">30</option>\r\n              <option value=\"2031\">31</option>\r\n              <option value=\"2032\">32</option>\r\n              <option value=\"2033\">33</option>\r\n              <option value=\"2034\">34</option>\r\n              <option value=\"2035\">35</option>\r\n              <option value=\"2036\">36</option>\r\n              <option value=\"2037\">37</option>\r\n              <option value=\"2038\">38</option>\r\n              <option value=\"2039\">39</option>\r\n              <option value=\"2040\">40</option>\r\n              <option value=\"2041\">41</option>\r\n              <option value=\"2042\">42</option>\r\n              <option value=\"2043\">43</option>\r\n              <option value=\"2044\">44</option>\r\n              <option value=\"2045\">45</option>\r\n              <option value=\"2046\">46</option>\r\n              <option value=\"2047\">47</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div id=\"form-sec-code\" className={\"formField\"}>\r\n          <label htmlFor=\"sec-code\">Security code:</label>\r\n          <input\r\n            name=\"sec-code\"\r\n            type=\"password\"\r\n            maxLength=\"3\"\r\n            placeholder=\"123\"\r\n            className={\"input\"}\r\n            value={code}\r\n            onChange={(e) => setCode(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <button type=\"submit\" className={\"payButton\"}>\r\n          Pay\r\n        </button>\r\n        <p>{paymentStatus}</p>\r\n      </form>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default CreditCard;\r\n"]},"metadata":{},"sourceType":"module"}