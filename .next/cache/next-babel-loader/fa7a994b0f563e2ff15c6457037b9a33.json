{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport cookie from \"js-cookie\";\n\nvar CryptoJS = require(\"crypto-js\");\n\nvar host = process.env.API_URL;\nexport var userRegister = function userRegister(userData, setIsLoading, cb) {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var res, _yield$res$data, token;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.post(\"\".concat(host, \"/api/user/auth/signUp\"), userData);\n\n            case 3:\n              res = _context.sent;\n\n              if (!(res.status === 200)) {\n                _context.next = 11;\n                break;\n              }\n\n              _context.next = 7;\n              return res.data;\n\n            case 7:\n              _yield$res$data = _context.sent;\n              token = _yield$res$data.token;\n              cookie.set(\"_wus_BJK\", token, {\n                expires: 7\n              });\n              cb();\n\n            case 11:\n              _context.next = 21;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](0);\n              setIsLoading(false);\n              console.log(_context.t0);\n\n              if (!_context.t0.response.data.error) {\n                _context.next = 19;\n                break;\n              }\n\n              return _context.abrupt(\"return\", toast.error(_context.t0.response.data.error));\n\n            case 19:\n              if (!_context.t0.response.data.details[0].message) {\n                _context.next = 21;\n                break;\n              }\n\n              return _context.abrupt(\"return\", toast.error(_context.t0.response.data.details[0].message));\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 13]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var userLogin = function userLogin(userData, setIsLoading, cb) {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n      var res, _yield$res$data2, token;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return axios.post(\"\".concat(host, \"/api/user/auth/signIn\"), userData);\n\n            case 3:\n              res = _context2.sent;\n\n              if (!(res.status === 200)) {\n                _context2.next = 11;\n                break;\n              }\n\n              _context2.next = 7;\n              return res.data;\n\n            case 7:\n              _yield$res$data2 = _context2.sent;\n              token = _yield$res$data2.token;\n              cookie.set(\"_wus_BJK\", token, {\n                expires: 7\n              });\n              cb();\n\n            case 11:\n              _context2.next = 21;\n              break;\n\n            case 13:\n              _context2.prev = 13;\n              _context2.t0 = _context2[\"catch\"](0);\n              setIsLoading(false);\n              console.log(_context2.t0);\n\n              if (!_context2.t0.response.data.error) {\n                _context2.next = 19;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", toast.error(_context2.t0.response.data.error));\n\n            case 19:\n              if (!_context2.t0.response.data.details[0].message) {\n                _context2.next = 21;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", toast.error(_context2.t0.response.data.details[0].message));\n\n            case 21:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 13]]);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var logout = function logout() {\n  cookie.remove(\"_wus_BJK\");\n  window.location.href = \"/\";\n};\nexport var encryptUserData = function encryptUserData(data) {\n  try {\n    var encryptedData = CryptoJS.AES.encrypt(JSON.stringify(data), process.env.USER_KEY).toString();\n    localStorage.setItem(process.env.USER_COOKIE, encryptedData);\n    return true;\n  } catch (error) {\n    console.log(error);\n    localStorage.removeItem(process.env.USER_COOKIE);\n    return false;\n  }\n};\nexport var decryptUserData = function decryptUserData() {\n  try {\n    var infoItem = localStorage.getItem(process.env.USER_COOKIE) ? localStorage.getItem(process.env.USER_COOKIE) : null;\n\n    if (infoItem) {\n      var bytes = CryptoJS.AES.decrypt(infoItem, process.env.USER_KEY);\n      var stringArray = JSON.parse(bytes.toString(CryptoJS.enc.Utf8));\n      return stringArray;\n    } else {\n      return false;\n    }\n  } catch (error) {\n    console.log(error);\n    localStorage.removeItem(process.env.USER_COOKIE);\n    return false;\n  }\n};","map":{"version":3,"sources":["C:/Users/corde/Desktop/New folder/bikeshop/bikeshop_frontend/store/actions/userActions.js"],"names":["axios","toast","cookie","CryptoJS","require","host","process","env","API_URL","userRegister","userData","setIsLoading","cb","dispatch","post","res","status","data","token","set","expires","console","log","response","error","details","message","userLogin","logout","remove","window","location","href","encryptUserData","encryptedData","AES","encrypt","JSON","stringify","USER_KEY","toString","localStorage","setItem","USER_COOKIE","removeItem","decryptUserData","infoItem","getItem","bytes","decrypt","stringArray","parse","enc","Utf8"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport cookie from \"js-cookie\";\r\nvar CryptoJS = require(\"crypto-js\");\r\n\r\nlet host = process.env.API_URL;\r\n\r\nexport const userRegister = (userData, setIsLoading, cb) => async (\r\n  dispatch\r\n) => {\r\n  try {\r\n    const res = await axios.post(`${host}/api/user/auth/signUp`, userData);\r\n\r\n    // // save the new token from our fucking api to the cookies\r\n    if (res.status === 200) {\r\n      const { token } = await res.data;\r\n      cookie.set(\"_wus_BJK\", token, { expires: 7 });\r\n      cb();\r\n    }\r\n  } catch (err) {\r\n    setIsLoading(false);\r\n    console.log(err);\r\n    if (err.response.data.error) {\r\n      return toast.error(err.response.data.error);\r\n    }\r\n\r\n    if (err.response.data.details[0].message) {\r\n      return toast.error(err.response.data.details[0].message);\r\n    }\r\n  }\r\n};\r\n\r\nexport const userLogin = (userData, setIsLoading, cb) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.post(`${host}/api/user/auth/signIn`, userData);\r\n\r\n    // // save the new token from our fucking api to the cookies\r\n    if (res.status === 200) {\r\n      const { token } = await res.data;\r\n      cookie.set(\"_wus_BJK\", token, { expires: 7 });\r\n      cb();\r\n    }\r\n  } catch (err) {\r\n    setIsLoading(false);\r\n    console.log(err);\r\n    if (err.response.data.error) {\r\n      return toast.error(err.response.data.error);\r\n    }\r\n\r\n    if (err.response.data.details[0].message) {\r\n      return toast.error(err.response.data.details[0].message);\r\n    }\r\n  }\r\n};\r\n\r\nexport const logout = () => {\r\n  cookie.remove(\"_wus_BJK\");\r\n  window.location.href = \"/\";\r\n};\r\n\r\nexport const encryptUserData = (data) => {\r\n  try {\r\n    let encryptedData = CryptoJS.AES.encrypt(\r\n      JSON.stringify(data),\r\n      process.env.USER_KEY\r\n    ).toString();\r\n\r\n    localStorage.setItem(process.env.USER_COOKIE, encryptedData);\r\n    return true;\r\n  } catch (error) {\r\n    console.log(error);\r\n    localStorage.removeItem(process.env.USER_COOKIE);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const decryptUserData = () => {\r\n  try {\r\n    let infoItem = localStorage.getItem(process.env.USER_COOKIE)\r\n      ? localStorage.getItem(process.env.USER_COOKIE)\r\n      : null;\r\n    if (infoItem) {\r\n      let bytes = CryptoJS.AES.decrypt(infoItem, process.env.USER_KEY);\r\n      let stringArray = JSON.parse(bytes.toString(CryptoJS.enc.Utf8));\r\n      return stringArray;\r\n    } else {\r\n      return false;\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n\r\n    localStorage.removeItem(process.env.USER_COOKIE);\r\n    return false;\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}